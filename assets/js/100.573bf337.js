(window.webpackJsonp=window.webpackJsonp||[]).push([[100],{460:function(s,a,t){"use strict";t.r(a);var n=t(7),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"大数据技术之-hadoop-入门"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#大数据技术之-hadoop-入门"}},[s._v("#")]),s._v(" 大数据技术之 Hadoop（入门）")]),s._v(" "),a("p",[s._v("版本：V3.3")]),s._v(" "),a("h1",{attrs:{id:"第-1-章-hadoop-概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第-1-章-hadoop-概述"}},[s._v("#")]),s._v(" 第 1 章 Hadoop 概述")]),s._v(" "),a("h2",{attrs:{id:"_1-1-hadoop-是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-hadoop-是什么"}},[s._v("#")]),s._v(" 1.1 Hadoop 是什么")]),s._v(" "),a("p",[a("strong",[s._v("Hadoop是什么")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("Hadoop是一个由Apache基金会所开发的"),a("strong",[s._v("分布式系统基础架构")]),s._v("。")])]),s._v(" "),a("li",[a("p",[s._v("主要解决，海量数据的"),a("strong",[s._v("存储")]),s._v("和海量数据的"),a("strong",[s._v("分析计算")]),s._v("问题。")])]),s._v(" "),a("li",[a("p",[s._v("广义上来说，Hadoop通常是指一个更广泛的概念——"),a("strong",[s._v("Hadoop生态圈")]),s._v("。")])])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202502112309972.png",alt:"image-20250211230952929"}})]),s._v(" "),a("h2",{attrs:{id:"_1-2-hadoop-发展历史-了解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-hadoop-发展历史-了解"}},[s._v("#")]),s._v(" 1.2 Hadoop 发展历史（了解）")]),s._v(" "),a("p",[a("strong",[s._v("Hadoop发展历史")])]),s._v(" "),a("p",[s._v("1）Hadoop创始人Doug Cutting，为了实现与Google类似的全文搜索功能，他在Lucene框架基础上进行优化升级，查询引擎和索引引擎。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202502172138384.png",alt:"image-20250217213854352"}})]),s._v(" "),a("p",[s._v("2）2001年年底Lucene成为Apache基金会的一个子项目。")]),s._v(" "),a("p",[s._v("3）对于海量数据的场景，Lucene框架面对与Google同样的困难，存储海量数据困难，检索海量速度慢。")]),s._v(" "),a("p",[s._v("4）学习和模仿Google解决这些问题的办法 ：微型版Nutch。")]),s._v(" "),a("p",[s._v("5）可以说Google是Hadoop的思想之源（Google在大数据方面的三篇论文）")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202502172140613.png",alt:"image-20250217214017569"}})]),s._v(" "),a("p",[s._v("6）2003-2004年，Google公开了部分GFS和MapReduce思想的细节，以此为基础Doug Cutting等人用了"),a("strong",[s._v("2")]),s._v("年业余时间实现了DFS和MapReduce机制，使Nutch性能飙升。")]),s._v(" "),a("p",[s._v("7）2005 年Hadoop 作为 Lucene的子项目 Nutch的一部分正式引入Apache基金会。")]),s._v(" "),a("p",[s._v("8）2006 年 3 月份，Map-Reduce和Nutch Distributed File System （NDFS）分别被纳入到 Hadoop 项目中，Hadoop就此正式诞生，标志着大数据时代来临。")]),s._v(" "),a("p",[s._v("9）名字来源于Doug Cutting儿子的玩具大象")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202502172141901.png",alt:"image-20250217214156870"}})]),s._v(" "),a("h2",{attrs:{id:"_1-3-hadoop-三大发行版本-了解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-hadoop-三大发行版本-了解"}},[s._v("#")]),s._v(" 1.3 Hadoop 三大发行版本（了解）")]),s._v(" "),a("p",[s._v("Hadoop 三大发行版本：Apache、Cloudera、Hortonworks。")]),s._v(" "),a("p",[s._v("​\t\tApache 版本最原始（最基础）的版本，对于入门学习最好。2006")]),s._v(" "),a("p",[s._v("​\t\tCloudera 内部集成了很多大数据框架，对应产品CDH。2008")]),s._v(" "),a("p",[s._v("​\t\tHortonworks 文档较好，对应产品HDP。2011")]),s._v(" "),a("p",[s._v("​\t\tHortonworks 现在已经被Cloudera 公司收购，推出新的品牌CDP。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202502172143565.png",alt:"image-20250217214322526"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202502172143903.png",alt:"image-20250217214341860"}})]),s._v(" "),a("h3",{attrs:{id:"_1-apache-hadoop"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-apache-hadoop"}},[s._v("#")]),s._v(" 1）Apache Hadoop")]),s._v(" "),a("p",[s._v("官网地址：http://hadoop.apache.org")]),s._v(" "),a("p",[s._v("下载地址：https://hadoop.apache.org/releases.html")]),s._v(" "),a("h3",{attrs:{id:"_2-cloudera-hadoop"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-cloudera-hadoop"}},[s._v("#")]),s._v(" 2）Cloudera Hadoop")]),s._v(" "),a("p",[s._v("官网地址：https://www.cloudera.com/downloads/cdh")]),s._v(" "),a("p",[s._v("下载地址：https://docs.cloudera.com/documentation/enterprise/6/release-notes/topics/rg_cdh_6_download.html")]),s._v(" "),a("p",[s._v("（1）2008 年成立的 Cloudera 是最早将Hadoop 商用的公司，为合作伙伴提供Hadoop 的商用解决方案，主要是包括支持、咨询服务、培训。")]),s._v(" "),a("p",[s._v("（"),a("strong",[s._v("2")]),s._v("）"),a("strong",[s._v("2009")]),s._v(" 年 "),a("strong",[s._v("Hadoop")]),s._v(" 的创始人 "),a("strong",[s._v("Doug Cutting")]),s._v(" 也加盟 "),a("strong",[s._v("Cloudera")]),s._v(" 公司。Cloudera 产品主要为CDH，Cloudera Manager，Cloudera Support")]),s._v(" "),a("p",[s._v("（3）CDH 是 Cloudera 的 Hadoop 发行版，完全开源，比 Apache Hadoop 在兼容性，安全性，稳定性上有所增强。Cloudera 的标价为每年每个节点 "),a("strong",[s._v("10000")]),s._v(" 美元。")]),s._v(" "),a("p",[s._v("（4）Cloudera Manager 是集群的软件分发及管理监控平台，可以在几个小时内部署好一个Hadoop 集群，并对集群的节点及服务进行实时监控。")]),s._v(" "),a("h3",{attrs:{id:"_3-hortonworks-hadoop"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-hortonworks-hadoop"}},[s._v("#")]),s._v(" 3）Hortonworks Hadoop")]),s._v(" "),a("p",[s._v("官网地址：https://hortonworks.com/products/data-center/hdp/")]),s._v(" "),a("p",[s._v("下载地址：https://hortonworks.com/downloads/#data-platform")]),s._v(" "),a("p",[s._v("（1）2011 年成立的 Hortonworks 是雅虎与硅谷风投公司Benchmark Capital 合资组建。")]),s._v(" "),a("p",[s._v("（"),a("strong",[s._v("2")]),s._v("）公司成立之初就吸纳了大约 "),a("strong",[s._v("25")]),s._v(" 名至 "),a("strong",[s._v("30")]),s._v(" 名专门研究 "),a("strong",[s._v("Hadoop")]),s._v(" 的雅虎工程师，上述工程师均在"),a("strong",[s._v("2005")]),s._v(" 年开始协助雅虎开发"),a("strong",[s._v("Hadoop")]),s._v("，贡献了 **Hadoop80%**的代码。")]),s._v(" "),a("p",[s._v("（3）Hortonworks 的主打产品是Hortonworks Data Platform（HDP），也同样是100%开源的产品，HDP 除常见的项目外还包括了"),a("strong",[s._v("Ambari")]),s._v("，一款开源的安装和管理系统。")]),s._v(" "),a("p",[s._v("（4）2018 年Hortonworks 目前已经被 "),a("strong",[s._v("Cloudera")]),s._v(" 公司收购。")]),s._v(" "),a("h2",{attrs:{id:"_1-4-hadoop-优势-4-高"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-hadoop-优势-4-高"}},[s._v("#")]),s._v(" 1.4 Hadoop 优势（"),a("strong",[s._v("4")]),s._v(" 高）")]),s._v(" "),a("h3",{attrs:{id:"hadoop优势-4高"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hadoop优势-4高"}},[s._v("#")]),s._v(" Hadoop优势（4高）")]),s._v(" "),a("p",[s._v("1）高可靠性：Hadoop底层维护多个数据副本，所以即使Hadoop某个计算元素或存储出现故障，也不会导致数据的丢失。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202502172147036.png",alt:"image-20250217214725002"}})]),s._v(" "),a("p",[s._v("2）高扩展性：在集群间分配任务数据，可方便的扩展数以千计的节点。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202502172147963.png",alt:"image-20250217214752933"}})]),s._v(" "),a("p",[s._v("3）高效性：在MapReduce的思想下，Hadoop是并行工作的，以加快任务处理速度。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202502172148839.png",alt:"image-20250217214828807"}})]),s._v(" "),a("p",[s._v("4）高容错性：能够自动将失败的任务重新分配。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202502172149444.png",alt:"image-20250217214906417"}})]),s._v(" "),a("h2",{attrs:{id:"_1-5-hadoop-组成-面试重点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-hadoop-组成-面试重点"}},[s._v("#")]),s._v(" 1.5 Hadoop 组成（面试重点）")]),s._v(" "),a("h3",{attrs:{id:"hadoop1-x、2-x、3-x区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hadoop1-x、2-x、3-x区别"}},[s._v("#")]),s._v(" Hadoop1.x、2.x、3.x区别")]),s._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202502172150143.png",alt:"image-20250217215011111"}}),s._v(" "),a("p",[s._v("在 Hadoop1.x 时 代 ，Hadoop中的MapReduce同时处理业务逻辑运算和资源的调度，耦合性较大。")]),s._v(" "),a("p",[s._v("在"),a("strong",[s._v("Hadoop2.x")]),s._v("时代，增加 了 "),a("strong",[s._v("Yarn")]),s._v("。 "),a("strong",[s._v("Yarn")]),s._v(" 只 负 责资 源 的 调 度 ，"),a("strong",[s._v("MapReduce")]),s._v(" 只 负 责 运 算。")]),s._v(" "),a("p",[s._v("Hadoop3.x在组成上没有变化。")]),s._v(" "),a("h3",{attrs:{id:"_1-5-1-hdfs-架构概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-1-hdfs-架构概述"}},[s._v("#")]),s._v(" 1.5.1 HDFS 架构概述")]),s._v(" "),a("p",[s._v("Hadoop Distributed File System，简称 HDFS，是一个分布式文件系统。")]),s._v(" "),a("h4",{attrs:{id:"hdfs架构概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hdfs架构概述"}},[s._v("#")]),s._v(" HDFS架构概述")]),s._v(" "),a("p",[s._v("1）NameNode（nn）：存储文件的元数据，如文件名，文件目录结构，文件属性（生成时间、副本数、文件权限），以及每个文件的块列表和块所在的"),a("strong",[s._v("DataNode")]),s._v("等。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202502172152440.png",alt:"image-20250217215249403"}})]),s._v(" "),a("p",[s._v("2）DataNode(dn)：在本地文件系统存储文件块数据，以及块数据的校验和。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202502172153270.png",alt:"image-20250217215321240"}})]),s._v(" "),a("p",[s._v("3）Secondary NameNode(2nn)：每隔一段时间对"),a("strong",[s._v("NameNode")]),s._v("元数据备份。")]),s._v(" "),a("h3",{attrs:{id:"_1-5-2-yarn-架构概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-2-yarn-架构概述"}},[s._v("#")]),s._v(" 1.5.2 YARN 架构概述")]),s._v(" "),a("p",[s._v("Yet Another Resource Negotiator 简称 YARN ，另一种资源协调者，是 Hadoop 的资源管理器。")]),s._v(" "),a("h4",{attrs:{id:"yarn架构概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#yarn架构概述"}},[s._v("#")]),s._v(" YARN架构概述")]),s._v(" "),a("p",[s._v("1）ResourceManager（RM）：整个集群资源（内存、CPU等）的老大")]),s._v(" "),a("p",[s._v("2）NodeManager（NM）：单个节点服务器资源老大")]),s._v(" "),a("p",[s._v("3）ApplicationMaster（AM）：单个任务运行的老大")]),s._v(" "),a("p",[s._v("4）Container：容器，相当一台独立的服务器，里面封装了任务运行所需要的资源，如内存、CPU、磁盘、网络等。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202502172156486.png",alt:"image-20250217215646459"}})]),s._v(" "),a("p",[s._v("说明1：客户端可以有多个")]),s._v(" "),a("p",[s._v("说明2：集群上可以运行多个ApplicationMaster")]),s._v(" "),a("p",[s._v("说明3：每个NodeManager上可以有多个Container")]),s._v(" "),a("h3",{attrs:{id:"_1-5-3-mapreduce-架构概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-3-mapreduce-架构概述"}},[s._v("#")]),s._v(" 1.5.3 MapReduce 架构概述")]),s._v(" "),a("p",[s._v("MapReduce 将计算过程分为两个阶段：Map 和Reduce")]),s._v(" "),a("p",[s._v("1）Map 阶段并行处理输入数据")]),s._v(" "),a("p",[s._v("2）Reduce 阶段对 Map 结果进行汇总")]),s._v(" "),a("h4",{attrs:{id:"mapreduce架构概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mapreduce架构概述"}},[s._v("#")]),s._v(" MapReduce架构概述")]),s._v(" "),a("p",[s._v("任务需求:找出宋宋老师2015年5月份的教学视频")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202502172212077.png",alt:"image-20250217221241044"}})]),s._v(" "),a("h3",{attrs:{id:"_1-5-4-hdfs-、yarn、-mapreduce-三者关系"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-4-hdfs-、yarn、-mapreduce-三者关系"}},[s._v("#")]),s._v(" 1.5.4 HDFS**、"),a("strong",[s._v("YARN")]),s._v("、**MapReduce 三者关系")]),s._v(" "),a("h4",{attrs:{id:"hdfs、yarn、mapreduce三者关系"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hdfs、yarn、mapreduce三者关系"}},[s._v("#")]),s._v(" HDFS、YARN、MapReduce三者关系")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202502172214825.png",alt:"image-20250217221418790"}})]),s._v(" "),a("h2",{attrs:{id:"_1-6-大数据技术生态体系"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-大数据技术生态体系"}},[s._v("#")]),s._v(" 1.6 大数据技术生态体系")]),s._v(" "),a("h3",{attrs:{id:"大数据技术生态体系"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#大数据技术生态体系"}},[s._v("#")]),s._v(" 大数据技术生态体系")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202502172215622.png",alt:"image-20250217221542574"}})]),s._v(" "),a("p",[s._v("图中涉及的技术名词解释如下：")]),s._v(" "),a("p",[s._v("1）Sqoop：Sqoop 是一款开源的工具，主要用于在Hadoop、Hive 与传统的数据库（MySQL）间进行数据的传递，可以将一个关系型数据库（例如 ：MySQL，Oracle 等）中的数据导进到Hadoop 的HDFS 中，也可以将HDFS 的数据导进到关系型数据库中。")]),s._v(" "),a("p",[s._v("2） Flume： Flume 是一个高可用的，高可靠的，分布式的海量日志采集、聚合和传输的系统，Flume 支持在日志系统中定制各类数据发送方，用于收集数据；")]),s._v(" "),a("p",[s._v("3）Kafka：Kafka 是一种高吞吐量的分布式发布订阅消息系统；")]),s._v(" "),a("p",[s._v("4）Spark：Spark 是当前最流行的开源大数据内存计算框架。可以基于 Hadoop 上存储的大数据进行计算。")]),s._v(" "),a("p",[s._v("5）Flink：Flink 是当前最流行的开源大数据内存计算框架。用于实时计算的场景较多。")]),s._v(" "),a("p",[s._v("6）Oozie：Oozie 是一个管理Hadoop 作业（job）的工作流程调度管理系统。")]),s._v(" "),a("p",[s._v("7） Hbase： HBase 是一个分布式的、面向列的开源数据库。 HBase 不同于一般的关系数据库，它是一个适合于非结构化数据存储的数据库。")]),s._v(" "),a("p",[s._v("8）Hive：Hive 是基于 Hadoop 的一个数据仓库工具，可以将结构化的数据文件映射为一张数据库表，并提供简单的 SQL 查询功能，可以将 SQL 语句转换为 MapReduce 任务进行运行。其优点是学习成本低，可以通过类 SQL 语句快速实现简单的 MapReduce 统计，不必开发专门的MapReduce 应用，十分适合数据仓库的统计分析。")]),s._v(" "),a("p",[s._v("9） ZooKeeper：它是一个针对大型分布式系统的可靠协调系统，提供的功能包括：配置维护、名字服务、分布式同步、组服务等。")]),s._v(" "),a("h2",{attrs:{id:"_1-7-推荐系统框架图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-推荐系统框架图"}},[s._v("#")]),s._v(" 1.7 推荐系统框架图")]),s._v(" "),a("h3",{attrs:{id:"推荐系统项目框架"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#推荐系统项目框架"}},[s._v("#")]),s._v(" 推荐系统项目框架")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202502172218304.png",alt:"image-20250217221856259"}})]),s._v(" "),a("h1",{attrs:{id:"第-2-章-hadoop-运行环境搭建-开发重点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第-2-章-hadoop-运行环境搭建-开发重点"}},[s._v("#")]),s._v(" 第 2 章 "),a("strong",[s._v("Hadoop")]),s._v(" 运行环境搭建（开发重点）")]),s._v(" "),a("h2",{attrs:{id:"_2-1-模板虚拟机环境准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-模板虚拟机环境准备"}},[s._v("#")]),s._v(" 2.1 模板虚拟机环境准备")]),s._v(" "),a("p",[a("strong",[s._v("0")]),s._v("）安装模板虚拟机，"),a("strong",[s._v("IP")]),s._v(" 地址192.168.10.100、主机名称hadoop100、内存4G、硬盘50G（下面这个文件没找到，主机对应node1、node2、node3）")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202502172220539.png",alt:"image-20250217222047506"}})]),s._v(" "),a("p",[a("strong",[s._v("1")]),s._v("）"),a("strong",[s._v("hadoop100")]),s._v(" 虚拟机配置要求如下（本文 "),a("strong",[s._v("Linux")]),s._v(" 系统全部以"),a("strong",[s._v("CentOS-7.5-x86-1804")]),s._v(" 为例）")]),s._v(" "),a("p",[s._v("（1）使用yum 安装需要虚拟机可以正常上网，yum 安装前可以先测试下虚拟机联网情况")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@hadoop100 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ping www.baidu.com")]),s._v("\nPING www.baidu.com "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14.215")]),s._v(".177.39"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("56")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("84")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" bytes of data.\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14.215")]),s._v(".177.39 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14.215")]),s._v(".177.39"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.60")]),s._v(" ms\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14.215")]),s._v(".177.39 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14.215")]),s._v(".177.39"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7.72")]),s._v(" ms\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("（2）安装epel-release")]),s._v(" "),a("p",[s._v("注：Extra Packages for Enterprise Linux 是为“红帽系”的操作系统提供额外的软件包，适用于 RHEL、CentOS 和 Scientific Linux。相当于是一个软件仓库，大多数 rpm 包在官方repository 中是找不到的）")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@hadoop100 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yum install -y epel-release")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("（3） 注意： 如果Linux 安装的是最小系统版，还需要安装如下工具；如果安装的是 Linux桌面标准版，不需要执行如下操作")]),s._v(" "),a("ul",[a("li",[s._v("net-tool：工具包集合，包含ifconfig 等命令")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@hadoop100 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yum install -y net-tools")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("vim：编辑器")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@hadoop100 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yum install -y vim")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("2")]),s._v("）关闭防火墙，关闭防火墙开机自启")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@hadoop100 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl stop firewalld")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@hadoop100 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl disable firewalld.service")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("注意：在企业开发时，通常单个服务器的防火墙时关闭的。公司整体对外会设置非常安全的防火墙")]),s._v(" "),a("p",[a("strong",[s._v("3")]),s._v("）创建 "),a("strong",[s._v("atguigu")]),s._v(" 用户，并修改"),a("strong",[s._v("atguigu")]),s._v(" 用户的密码")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@hadoop100 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# useradd atguigu")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@hadoop100 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# passwd atguigu")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("4")]),s._v("）配置 "),a("strong",[s._v("atguigu")]),s._v(" 用户具有 "),a("strong",[s._v("root")]),s._v(" 权限，方便后期加 "),a("strong",[s._v("sudo")]),s._v(" 执行 "),a("strong",[s._v("root")]),s._v(" 权限的命令")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@hadoop100 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim /etc/sudoers")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("修改/etc/sudoers 文件，在%wheel 这行下面添加一行，如下所示：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Allow root to run any commands anywhere ")]),s._v("\nroot    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ALL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ALL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("       ALL\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Allows people in group wheel to run all commands")]),s._v("\n%wheel  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ALL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ALL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("       ALL\natguigu "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ALL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ALL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("       NOPASSWD:ALL\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("注意：atguigu 这一行不要直接放到 root 行下面，因为所有用户都属于wheel 组，你先配置了atguigu 具有免密功能，但是程序执行到%wheel 行时，该功能又被覆盖回需要密码。所以 atguigu 要放到%wheel 这行下面。")]),s._v(" "),a("p",[a("strong",[s._v("5")]),s._v("）在/opt 目录下创建文件夹，并修改所属主和所属组")]),s._v(" "),a("p",[s._v("（1）在/opt 目录下创建module、software 文件夹")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@hadoop100 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkdir /opt/module")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@hadoop100 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkdir /opt/software")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("（2）修改module、software 文件夹的所有者和所属组均为atguigu 用户")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@hadoop100 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chown atguigu:atguigu /opt/module")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@hadoop100 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chown atguigu:atguigu /opt/software")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("（3）查看module、software 文件夹的所有者和所属组")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@hadoop100 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /opt/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@hadoop100 opt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll")]),s._v("\n总用量 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" atguigu atguigu "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("月 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":18 module\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("月 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" rh\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" atguigu atguigu "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("月 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":18 software\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[a("strong",[s._v("6")]),s._v("）卸载虚拟机自带的 "),a("strong",[s._v("JDK")])]),s._v(" "),a("p",[s._v("注意：如果你的虚拟机是最小化安装不需要执行这一步。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@hadoop100 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -qa | grep -i java | xargs -n1 rpm -e --nodeps")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("➢ rpm -qa：查询所安装的所有rpm 软件包")]),s._v(" "),a("p",[s._v("➢ grep -i：忽略大小写")]),s._v(" "),a("p",[s._v("➢ xargs -n1：表示每次只传递一个参数")]),s._v(" "),a("p",[s._v("➢ rpm -e –nodeps：强制卸载软件")]),s._v(" "),a("p",[a("strong",[s._v("7")]),s._v("）重启虚拟机")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@hadoop100 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# reboot")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"_2-2-克隆虚拟机"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-克隆虚拟机"}},[s._v("#")]),s._v(" 2.2 克隆虚拟机")]),s._v(" "),a("p",[a("strong",[s._v("1")]),s._v("）利用模板机 "),a("strong",[s._v("hadoop100")]),s._v("，克隆三台虚拟机："),a("strong",[s._v("hadoop102 hadoop103 hadoop104")]),s._v("（对应node1、node2、node3）")]),s._v(" "),a("p",[s._v("注意：克隆时，要先关闭hadoop100")]),s._v(" "),a("p",[a("strong",[s._v("2")]),s._v("）修改克隆机 "),a("strong",[s._v("IP")]),s._v("，以下以"),a("strong",[s._v("hadoop102")]),s._v(" 举例说明")]),s._v(" "),a("p",[s._v("（1）修改克隆虚拟机的静态 IP")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@hadoop100 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim /etc/sysconfig/network-scripts/ifcfg-ens33")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("改成")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DEVICE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ens33\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TYPE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Ethernet\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ONBOOT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("BOOTPROTO")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("static\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ens33"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("IPADDR")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.102\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PREFIX")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GATEWAY")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.2\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DNS1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.2\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("（2）查看Linux 虚拟机的虚拟网络编辑器，编辑->虚拟网络编辑器->VMnet8")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202502172240320.png",alt:"image-20250217224043277"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202502172241089.png",alt:"image-20250217224116046"}})]),s._v(" "),a("p",[s._v("（3）查看Windows 系统适配器VMware Network Adapter VMnet8 的IP 地址")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202502172241750.png",alt:"image-20250217224153708"}})]),s._v(" "),a("p",[s._v("（4）保证 Linux 系统 ifcfg-ens33 文件中 IP 地址、虚拟网络编辑器地址和 Windows 系统VM8 网络 IP 地址相同。")]),s._v(" "),a("p",[a("strong",[s._v("3")]),s._v("）修改克隆机主机名，以下以"),a("strong",[s._v("hadoop102")]),s._v(" 举例说明")]),s._v(" "),a("p",[s._v("（1）修改主机名称")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@hadoop100 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim /etc/hostname")]),s._v("\nhadoop102\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("（2）配置Linux 克隆机主机名称映射 hosts 文件，打开/etc/hosts")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@hadoop100 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim /etc/hosts")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("添加如下内容")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.100 hadoop100\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.101 hadoop101\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.102 hadoop102\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.103 hadoop103\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.104 hadoop104\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.105 hadoop105\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.106 hadoop106\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.107 hadoop107\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.108 hadoop108\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[a("strong",[s._v("4")]),s._v("）重启克隆机 "),a("strong",[s._v("hadoop102")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# reboot")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("5")]),s._v("）修改 "),a("strong",[s._v("windows")]),s._v(" 的主机映射文件（"),a("strong",[s._v("hosts")]),s._v(" 文件）")]),s._v(" "),a("p",[s._v("（1）如果操作系统是window7，可以直接修改")]),s._v(" "),a("p",[s._v("（a）进入C:\\Windows\\System32\\drivers\\etc 路径")]),s._v(" "),a("p",[s._v("（b）打开hosts 文件并添加如下内容，然后保存")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.100 hadoop100\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.101 hadoop101\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.102 hadoop102\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.103 hadoop103\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.104 hadoop104\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.105 hadoop105\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.106 hadoop106\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.107 hadoop107\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.108 hadoop108\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("（2）如果操作系统是window10，先拷贝出来，修改保存以后，再覆盖即可")]),s._v(" "),a("p",[s._v("（a）进入C:\\Windows\\System32\\drivers\\etc 路径")]),s._v(" "),a("p",[s._v("（b）拷贝hosts 文件到桌面")]),s._v(" "),a("p",[s._v("（c）打开桌面 hosts 文件并添加如下内容")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.100 hadoop100\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.101 hadoop101\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.102 hadoop102\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.103 hadoop103\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.104 hadoop104\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.105 hadoop105\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.106 hadoop106\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.107 hadoop107\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.108 hadoop108\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("（d）将桌面 hosts 文件覆盖C:\\Windows\\System32\\drivers\\etc 路径hosts 文件")]),s._v(" "),a("h2",{attrs:{id:"_2-3-在-hadoop102-安装-jdk"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-在-hadoop102-安装-jdk"}},[s._v("#")]),s._v(" 2.3 在 "),a("strong",[s._v("hadoop102")]),s._v(" 安装 "),a("strong",[s._v("JDK")])]),s._v(" "),a("p",[a("strong",[s._v("1")]),s._v("）卸载现有 "),a("strong",[s._v("JDK")])]),s._v(" "),a("p",[s._v("注意：安装 JDK 前，一定确保提前删除了虚拟机自带的JDK。详细步骤见问文档3.1 节中卸载JDK 步骤。")]),s._v(" "),a("p",[a("strong",[s._v("2")]),s._v("）用 "),a("strong",[s._v("XShell")]),s._v(" 传输工具将"),a("strong",[s._v("JDK")]),s._v(" 导入到"),a("strong",[s._v("opt")]),s._v(" 目录下面的 "),a("strong",[s._v("software")]),s._v(" 文件夹下面")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202502172247623.png",alt:"image-20250217224712570"}})]),s._v(" "),a("p",[a("strong",[s._v("3")]),s._v("）在 "),a("strong",[s._v("Linux")]),s._v(" 系统下的 "),a("strong",[s._v("opt")]),s._v(" 目录中查看软件包是否导入成功")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" /opt/software/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("看到如下结果：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("jdk-8u212-linux-x64.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("4")]),s._v("）解压 "),a("strong",[s._v("JDK")]),s._v(" 到/opt/module 目录下")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 software"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-zxvf")]),s._v(" jdk-8u212-linux-x64.tar.gz "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-C")]),s._v(" /opt/module/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("5")]),s._v("）配置 "),a("strong",[s._v("JDK")]),s._v(" 环境变量")]),s._v(" "),a("p",[s._v("（1）新建/etc/profile.d/my_env.sh 文件")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/profile.d/my_env.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("添加如下内容")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#JAVA_HOME")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JAVA_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/opt/module/jdk1.8.0_212\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JAVA_HOME")]),s._v("/bin\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("（2）保存后退出")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v(":wq\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("（3）source 一下/etc/profile 文件，让新的环境变量PATH 生效")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("6")]),s._v("）测试 "),a("strong",[s._v("JDK")]),s._v(" 是否安装成功")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("java")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-version")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("如果能看到以下结果，则代表Java 安装成功。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("java")]),s._v(" version "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.8.0_212"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("注意：重启（如果 java -version 可以用就不用重启）")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("reboot")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"_2-4-在-hadoop102-安装-hadoop"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-在-hadoop102-安装-hadoop"}},[s._v("#")]),s._v(" 2.4 在 "),a("strong",[s._v("hadoop102")]),s._v(" 安装 "),a("strong",[s._v("Hadoop")])]),s._v(" "),a("p",[s._v("Hadoop 下载地址：https://archive.apache.org/dist/hadoop/common/hadoop-3.1.3/")]),s._v(" "),a("p",[a("strong",[s._v("1")]),s._v("）用 "),a("strong",[s._v("XShell")]),s._v(" 文件传输工具将"),a("strong",[s._v("hadoop-3.1.3.tar.gz")]),s._v(" 导入到"),a("strong",[s._v("opt")]),s._v(" 目录下面的 "),a("strong",[s._v("software")]),s._v(" 文件夹下面")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202502172251390.png",alt:"image-20250217225147349"}})]),s._v(" "),a("p",[a("strong",[s._v("2")]),s._v("）进入到 "),a("strong",[s._v("Hadoop")]),s._v(" 安装包路径下")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /opt/software/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("3")]),s._v("）解压安装文件到/opt/module 下面")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 software"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-zxvf")]),s._v(" hadoop-3.1.3.tar.gz "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-C")]),s._v(" /opt/module/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("4")]),s._v("）查看是否解压成功")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 software"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" /opt/module/\nhadoop-3.1.3\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("5")]),s._v("）将 "),a("strong",[s._v("Hadoop")]),s._v(" 添加到环境变量")]),s._v(" "),a("p",[s._v("（1）获取Hadoop 安装路径")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 hadoop-3.1.3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),s._v("\n/opt/module/hadoop-3.1.3\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("（2）打开/etc/profile.d/my_env.sh 文件")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 hadoop-3.1.3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/profile.d/my_env.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("➢ 在my_env.sh 文件末尾添加如下内容：（shift+g）")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#HADOOP_HOME")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("HADOOP_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/opt/module/hadoop-3.1.3\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$HADOOP_HOME")]),s._v("/bin\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$HADOOP_HOME")]),s._v("/sbin\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("➢ 保存并退出： "),a("code",[s._v(":wq")])]),s._v(" "),a("p",[s._v("（3）让修改后的文件生效")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 hadoop-3.1.3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("6")]),s._v("）测试是否安装成功")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 hadoop-3.1.3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ hadoop version\nHadoop "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.1")]),s._v(".3\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("7")]),s._v("）重启（如果 "),a("strong",[s._v("Hadoop")]),s._v(" 命令不能用再重启虚拟机）")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 hadoop-3.1.3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("reboot")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"_2-5-hadoop-目录结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-hadoop-目录结构"}},[s._v("#")]),s._v(" 2.5 Hadoop 目录结构")]),s._v(" "),a("p",[a("strong",[s._v("1")]),s._v("）查看 "),a("strong",[s._v("Hadoop")]),s._v(" 目录结构")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 hadoop-3.1.3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ ll\n总用量 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("52")]),s._v("\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" atguigu atguigu "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("月 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" bin\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" atguigu atguigu "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("月 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" etc\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" atguigu atguigu "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("月 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" include\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" atguigu atguigu "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("月 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" lib\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" atguigu atguigu "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("月 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" libexec\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" atguigu atguigu "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15429")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("月 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" LICENSE.txt\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" atguigu atguigu "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("101")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("月 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" NOTICE.txt\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" atguigu atguigu "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1366")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("月 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" README.txt\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" atguigu atguigu "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("月 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" sbin\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" atguigu atguigu "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("月 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" share\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[a("strong",[s._v("2")]),s._v("）重要目录")]),s._v(" "),a("p",[s._v("（1）bin 目录：存放对 Hadoop 相关服务（hdfs，yarn，mapred）进行操作的脚本")]),s._v(" "),a("p",[s._v("（2）etc 目录：Hadoop 的配置文件目录，存放 Hadoop 的配置文件")]),s._v(" "),a("p",[s._v("（3）lib 目录：存放 Hadoop 的本地库（对数据进行压缩解压缩功能）")]),s._v(" "),a("p",[s._v("（4）sbin 目录：存放启动或停止 Hadoop 相关服务的脚本")]),s._v(" "),a("p",[s._v("（5）share 目录：存放Hadoop 的依赖 jar 包、文档、和官方案例")]),s._v(" "),a("h1",{attrs:{id:"第-3-章-hadoop-运行模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第-3-章-hadoop-运行模式"}},[s._v("#")]),s._v(" 第 3 章 Hadoop 运行模式")]),s._v(" "),a("p",[s._v("1）Hadoop 官方网站：http://hadoop.apache.org/")]),s._v(" "),a("p",[s._v("2）Hadoop 运行模式包括：本地模式、伪分布式模式以及完全分布式模式。")]),s._v(" "),a("p",[s._v("➢ 本地模式：单机运行，只是用来演示一下官方案例。生产环境不用。")]),s._v(" "),a("p",[s._v("➢ 伪分布式模式：也是单机运行，但是具备Hadoop 集群的所有功能，一台服务器模拟一个分布式的环境。个别缺钱的公司用来测试，生产环境不用。")]),s._v(" "),a("p",[s._v("➢ 完全分布式模式：多台服务器组成分布式环境。生产环境使用。")]),s._v(" "),a("h2",{attrs:{id:"_3-1-本地运行模式-官方-wordcount"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-本地运行模式-官方-wordcount"}},[s._v("#")]),s._v(" 3.1 本地运行模式（官方 "),a("strong",[s._v("WordCount")]),s._v("）")]),s._v(" "),a("p",[a("strong",[s._v("1")]),s._v("）创建在 "),a("strong",[s._v("hadoop-3.1.3")]),s._v(" 文件下面创建一个 "),a("strong",[s._v("wcinput")]),s._v(" 文件夹")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 hadoop-3.1.3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" wcinput\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("2")]),s._v("）在 "),a("strong",[s._v("wcinput")]),s._v(" 文件下创建一个 "),a("strong",[s._v("word.txt")]),s._v(" 文件")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 hadoop-3.1.3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" wcinput\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("3")]),s._v("）编辑 "),a("strong",[s._v("word.txt")]),s._v(" 文件")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 wcinput"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" word.txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("➢ 在文件中输入如下内容")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("hadoop "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v("\nhadoop mapreduce\natguigu\natguigu\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("➢ 保存退出："),a("code",[s._v(":wq")])]),s._v(" "),a("p",[a("strong",[s._v("4")]),s._v("）回到 "),a("strong",[s._v("Hadoop")]),s._v(" 目录/opt/module/hadoop-3.1.3")]),s._v(" "),a("p",[a("strong",[s._v("5")]),s._v("）执行程序")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 hadoop-3.1.3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.1.3.jar wordcount wcinput wcoutput\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("6")]),s._v("）查看结果")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 hadoop-3.1.3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" wcoutput/part-r-00000\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("看到如下结果：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("atguigu "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nhadoop "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nmapreduce "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h2",{attrs:{id:"_3-2-完全分布式运行模式-开发重点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-完全分布式运行模式-开发重点"}},[s._v("#")]),s._v(" 3.2 完全分布式运行模式（开发重点）")]),s._v(" "),a("p",[s._v("分析：")]),s._v(" "),a("p",[s._v("1）准备3 台客户机（关闭防火墙、静态 IP、主机名称）")]),s._v(" "),a("p",[s._v("2）安装JDK")]),s._v(" "),a("p",[s._v("3）配置环境变量")]),s._v(" "),a("p",[s._v("4）安装Hadoop")]),s._v(" "),a("p",[s._v("5）配置环境变量")]),s._v(" "),a("p",[a("strong",[s._v("6")]),s._v("）配置集群")]),s._v(" "),a("p",[a("strong",[s._v("7")]),s._v("）单点启动")]),s._v(" "),a("p",[a("strong",[s._v("8")]),s._v("）配置 "),a("strong",[s._v("ssh")])]),s._v(" "),a("p",[a("strong",[s._v("9")]),s._v("）群起并测试集群")]),s._v(" "),a("h3",{attrs:{id:"_3-2-1-虚拟机准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-1-虚拟机准备"}},[s._v("#")]),s._v(" 3.2.1 虚拟机准备")]),s._v(" "),a("p",[s._v("详见 2.1、2.2 两节。")]),s._v(" "),a("h2",{attrs:{id:"_3-2-2-编写集群分发脚本-xsync"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2-编写集群分发脚本-xsync"}},[s._v("#")]),s._v(" 3.2.2 编写集群分发脚本 "),a("strong",[s._v("xsync")])]),s._v(" "),a("p",[a("strong",[s._v("1")]),s._v("）"),a("strong",[s._v("scp")]),s._v("（"),a("strong",[s._v("secure copy")]),s._v("）安全拷贝")]),s._v(" "),a("p",[s._v("（1）scp 定义")]),s._v(" "),a("p",[s._v("scp 可以实现服务器与服务器之间的数据拷贝。（from server1 to server2）")]),s._v(" "),a("p",[s._v("（2）基本语法")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v("\t\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v("\t\t"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pdir")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$fname")]),s._v(" \t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$user")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pdir")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$fname")]),s._v("\n命令 \t递归 \t 要拷贝的文件路径/名称 \t\t 目的地用户@主机:目的地路径/名称\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("（3）案例实操")]),s._v(" "),a("p",[s._v("➢ 前提：在 hadoop102、hadoop103、hadoop104 都已经创建好的/opt/module、/opt/software 两个目录，并且已经把这两个目录修改为 atguigu:atguigu")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" atguigu:atguigu "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-R")]),s._v(" /opt/module\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("（a）在 hadoop102 上，将 hadoop102 中/opt/module/jdk1.8.0_212 目录拷贝到hadoop103 上。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" /opt/module/jdk1.8.0_212 atguigu@hadoop103:/opt/module\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("（b）在 hadoop103 上，将 hadoop102 中/opt/module/hadoop-3.1.3 目录拷贝到hadoop103 上。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop103 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" atguigu@hadoop102:/opt/module/hadoop-3.1.3 /opt/module/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("（c）在 hadoop103 上操作，将 hadoop102 中/opt/module 目录下所有目录拷贝到hadoop104 上。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop103 opt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" atguigu@hadoop102:/opt/module/* atguigu@hadoop104:/opt/module\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("2")]),s._v("）"),a("strong",[s._v("rsync")]),s._v(" 远程同步工具")]),s._v(" "),a("p",[s._v("rsync 主要用于备份和镜像。具有速度快、避免复制相同内容和支持符号链接的优点。")]),s._v(" "),a("p",[s._v("rsync 和 scp 区别：用 rsync 做文件的复制要比 scp 的速度快，rsync 只对差异文件做更新。scp 是把所有文件都复制过去。")]),s._v(" "),a("p",[s._v("（1）基本语法")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" \t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-av")]),s._v(" \t\t\t"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pdir")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$fname")]),s._v(" \t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$user")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pdir")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$fname")]),s._v("\n命令 \t\t选项参数 \t\t要拷贝的文件路径/名称 \t 目的地用户@主机:目的地路径/名称\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("选项参数说明")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("选项")]),s._v(" "),a("th",[s._v("功能")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("-a")]),s._v(" "),a("td",[s._v("归档拷贝")])]),s._v(" "),a("tr",[a("td",[s._v("-v")]),s._v(" "),a("td",[s._v("显示复制过程")])])])]),s._v(" "),a("p",[s._v("（2）案例实操")]),s._v(" "),a("p",[s._v("（a）删除hadoop103 中/opt/module/hadoop-3.1.3/wcinput")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop103 hadoop-3.1.3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" wcinput/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("（b）同步hadoop102 中的/opt/module/hadoop-3.1.3 到hadoop103")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-av")]),s._v(" hadoop-3.1.3/ atguigu@hadoop103:/opt/module/hadoop-3.1.3/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("3")]),s._v("）"),a("strong",[s._v("xsync")]),s._v(" 集群分发脚本")]),s._v(" "),a("p",[s._v("（1）需求：循环复制文件到所有节点的相同目录下")]),s._v(" "),a("p",[s._v("（2）需求分析：")]),s._v(" "),a("p",[s._v("（a）rsync 命令原始拷贝：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-av")]),s._v(" /opt/module atguigu@hadoop103:/opt/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("（b）期望脚本：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("xsync 要同步的文件名称\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("（c）期望脚本在任何路径都能使用（脚本放在声明了全局环境变量的路径）")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v("\n/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/home/atguigu/.local/bin:/home/atguigu/bin:/opt/module/jdk1.8.0_212/bin\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("（3）脚本实现")]),s._v(" "),a("p",[s._v("（a）在/home/atguigu/bin 目录下创建 xsync 文件")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 opt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home/atguigu\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" bin\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" bin\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" xsync\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("在该文件中编写如下代码")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1. 判断参数个数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$#")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-lt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" Not Enough Arguement"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2. 遍历集群所有机器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("host")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" hadoop102 hadoop103 hadoop104\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#3. 遍历所有目录，挨个发送")]),s._v("\n\t\t\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("file")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$@")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#4. 判断文件是否存在")]),s._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$file")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#5. 获取父目录")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("pdir")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-P")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("$(")]),s._v("dirname $file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n                \n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#6. 获取当前文件的名称")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("fname")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("basename")]),s._v(" $file"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mkdir -p '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pdir")]),s._v('"')]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-av")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pdir")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$fname")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pdir")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$file")]),s._v(" does not exists"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br")])]),a("p",[s._v("（b）修改脚本 xsync 具有执行权限")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x xsync\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("（c）测试脚本")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ xsync /home/atguigu/bin\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("（d）将脚本复制到/bin 中，以便全局调用")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" xsync /bin/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("（e）同步环境变量配置（root 所有者）")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" ./bin/xsync /etc/profile.d/my_env.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("注意：如果用了 sudo，那么xsync 一定要给它的路径补全。")]),s._v(" "),a("p",[s._v("让环境变量生效")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop103 bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop104 opt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"_3-2-3-ssh-无密登录配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-3-ssh-无密登录配置"}},[s._v("#")]),s._v(" 3.2.3 SSH 无密登录配置")]),s._v(" "),a("p",[a("strong",[s._v("1")]),s._v("）配置 "),a("strong",[s._v("ssh")])]),s._v(" "),a("p",[s._v("（1）基本语法")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" 另一台电脑的 IP 地址\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("（2）ssh 连接时出现Host key verification failed 的解决方法")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" hadoop103\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("➢ 如果出现如下内容")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("Are you sure you want to "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("continue")]),s._v(" connecting "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("yes/no"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("?\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("➢ 输入 yes，并回车")]),s._v(" "),a("p",[s._v("（3）退回到 hadoop102")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop103 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("2")]),s._v("）无密钥配置")]),s._v(" "),a("p",[s._v("（1）免密登录原理")]),s._v(" "),a("p",[a("strong",[s._v("免密登录原理")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo3/202502192039330.png",alt:"image-20250219203906258"}})]),s._v(" "),a("p",[s._v("（2）生成公钥和私钥")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 .ssh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),s._v("\n/home/atguigu/.ssh\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 .ssh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ ssh-keygen "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" rsa\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("然后敲（三个回车），就会生成两个文件 id_rsa（私钥）、id_rsa.pub（公钥）")]),s._v(" "),a("p",[s._v("（3）将公钥拷贝到要免密登录的目标机器上")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 .ssh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ ssh-copy-id hadoop102\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 .ssh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ ssh-copy-id hadoop103\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 .ssh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ ssh-copy-id hadoop104\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("注意：")]),s._v(" "),a("p",[s._v("还需要在 hadoop103 上采用 atguigu 账号配置一下无密登录到 hadoop102、hadoop103、hadoop104 服务器上。")]),s._v(" "),a("p",[s._v("还需要在 hadoop104 上采用 atguigu 账号配置一下无密登录到 hadoop102、hadoop103、hadoop104 服务器上。")]),s._v(" "),a("p",[s._v("还需要在 hadoop102 上采用 root 账号，配置一下无密登录到 hadoop102、hadoop103、hadoop104；")]),s._v(" "),a("p",[a("strong",[s._v("3")]),s._v("）"),a("strong",[s._v(".ssh")]),s._v(" 文件夹下（"),a("strong",[s._v("~/.ssh")]),s._v("）的文件功能解释")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("known_hosts")]),s._v(" "),a("th",[s._v("记录ssh 访问过计算机的公钥（public key）")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("id_rsa")]),s._v(" "),a("td",[s._v("生成的私钥")])]),s._v(" "),a("tr",[a("td",[s._v("id_rsa.pub")]),s._v(" "),a("td",[s._v("生成的公钥")])]),s._v(" "),a("tr",[a("td",[s._v("authorized_keys")]),s._v(" "),a("td",[s._v("存放授权过的无密登录服务器公钥")])])])]),s._v(" "),a("p",[a("strong",[s._v("3.2.4")]),s._v(" 集群配置")]),s._v(" "),a("p",[a("strong",[s._v("1")]),s._v("）集群部署规划")]),s._v(" "),a("p",[s._v("注意：")]),s._v(" "),a("p",[s._v("➢ NameNode 和SecondaryNameNode 不要安装在同一台服务器")]),s._v(" "),a("p",[s._v("➢ ResourceManager 也很消耗内存，不要和NameNode、SecondaryNameNode 配置在同一台机器上。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo3/202502192044591.png",alt:"image-20250219204424534"}})]),s._v(" "),a("p",[a("strong",[s._v("2")]),s._v("）配置文件说明")]),s._v(" "),a("p",[s._v("Hadoop 配置文件分两类：默认配置文件和自定义配置文件，只有用户想修改某一默认配置值时，才需要修改自定义配置文件，更改相应属性值。")]),s._v(" "),a("p",[s._v("（1）默认配置文件：")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("要获取的默认文件")]),s._v(" "),a("th",[s._v("文件存放在Hadoop 的 jar 包中的位置")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("[core-default.xml]")]),s._v(" "),a("td",[s._v("hadoop-common-3.1.3.jar/core-default.xml")])]),s._v(" "),a("tr",[a("td",[s._v("[hdfs-default.xml]")]),s._v(" "),a("td",[s._v("hadoop-hdfs-3.1.3.jar/hdfs-default.xml")])]),s._v(" "),a("tr",[a("td",[s._v("[yarn-default.xml]")]),s._v(" "),a("td",[s._v("hadoop-yarn-common-3.1.3.jar/yarn-default.xml")])]),s._v(" "),a("tr",[a("td",[s._v("[mapred-default.xml]")]),s._v(" "),a("td",[s._v("hadoop-mapreduce-client-core-3.1.3.jar/mapred-default.xml")])])])]),s._v(" "),a("p",[s._v("（2）自定义配置文件：")]),s._v(" "),a("p",[a("strong",[s._v("core-site.xml")]),s._v("、"),a("strong",[s._v("hdfs-site.xml")]),s._v("、"),a("strong",[s._v("yarn-site.xml")]),s._v("、"),a("strong",[s._v("mapred-site.xml")]),s._v(" 四个配置文件存放在$HADOOP_HOME/etc/hadoop 这个路径上，用户可以根据项目需求重新进行修改配置。")]),s._v(" "),a("p",[a("strong",[s._v("3")]),s._v("）配置集群")]),s._v(" "),a("p",[s._v("（1）核心配置文件")]),s._v(" "),a("p",[s._v("配置 core-site.xml")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$HADOOP_HOME")]),s._v("/etc/hadoop\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 hadoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" core-site.xml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("文件内容如下：")]),s._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token prolog"}},[s._v('<?xml version="1.0" encoding="UTF-8"?>')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token prolog"}},[s._v('<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("configuration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 指定NameNode的地址 --\x3e")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("fs.defaultFS"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hdfs://hadoop102:8020"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 指定hadoop数据的存储目录 --\x3e")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hadoop.tmp.dir"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("/opt/module/hadoop-3.1.3/data"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 配置HDFS网页登录使用的静态用户为atguigu --\x3e")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hadoop.http.staticuser.user"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("atguigu"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("configuration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("p",[s._v("（2）HDFS 配置文件")]),s._v(" "),a("p",[s._v("配置 hdfs-site.xml")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 hadoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" hdfs-site.xml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("文件内容如下：")]),s._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token prolog"}},[s._v('<?xml version="1.0" encoding="UTF-8"?>')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token prolog"}},[s._v('<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("configuration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- nn web端访问地址--\x3e")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("dfs.namenode.http-address"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hadoop102:9870"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 2nn web端访问地址--\x3e")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("dfs.namenode.secondary.http-address"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hadoop104:9868"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("configuration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("p",[s._v("（3）YARN 配置文件")]),s._v(" "),a("p",[s._v("配置 yarn-site.xml")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 hadoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" yarn-site.xml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("文件内容如下：")]),s._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token prolog"}},[s._v('<?xml version="1.0" encoding="UTF-8"?>')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token prolog"}},[s._v('<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("configuration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 指定MR走 shuffle --\x3e")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("yarn.nodemanager.aux-services"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("mapreduce_shuffle"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 指定ResourceManager的地址--\x3e")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("yarn.resourcemanager.hostname"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hadoop103"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 环境变量的继承 --\x3e")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("yarn.nodemanager.env-whitelist"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAPRED_HOME"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("configuration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("p",[s._v("（4）MapReduce 配置文件")]),s._v(" "),a("p",[s._v("配置 mapred-site.xml")]),s._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[s._v("[atguigu@hadoop102 hadoop]$ vim mapred-site.xml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("文件内容如下：")]),s._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token prolog"}},[s._v('<?xml version="1.0" encoding="UTF-8"?>')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token prolog"}},[s._v('<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("configuration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 指定MapReduce程序运行在 Yarn上 --\x3e")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("mapreduce.framework.name"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("yarn"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("configuration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[a("strong",[s._v("4")]),s._v("）在集群上分发配置好的 "),a("strong",[s._v("Hadoop")]),s._v(" 配置文件")]),s._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[s._v("[atguigu@hadoop102 hadoop]$ xsync /opt/module/hadoop-3.1.3/etc/hadoop/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("5")]),s._v("）去 "),a("strong",[s._v("103")]),s._v(" 和"),a("strong",[s._v("104")]),s._v(" 上查看文件分发情况")]),s._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[s._v("[atguigu@hadoop103 ~]$ cat /opt/module/hadoop-3.1.3/etc/hadoop/core-site.xml\n[atguigu@hadoop104 ~]$ cat /opt/module/hadoop-3.1.3/etc/hadoop/core-site.xml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("3.2.5")]),s._v(" 群起集群")]),s._v(" "),a("p",[a("strong",[s._v("1")]),s._v("）配置 "),a("strong",[s._v("workers")])]),s._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[s._v("[atguigu@hadoop102 hadoop]$ vim /opt/module/hadoop-3.1.3/etc/hadoop/workers\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("在该文件中增加如下内容：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("hadoop102\nhadoop103\nhadoop104\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("注意：该文件中添加的内容结尾不允许有空格，文件中不允许有空行。")]),s._v(" "),a("p",[s._v("同步所有节点配置文件")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 hadoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ xsync /opt/module/hadoop-3.1.3/etc\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("2")]),s._v("）启动集群")]),s._v(" "),a("p",[s._v("（1）如果集群是第一次启动，需要在 hadoop102 节点格式化 NameNode（注意：格式化NameNode，会产生新的集群 id，导致NameNode 和DataNode 的集群id 不一致，集群找不到已往数据。如果集群在运行过程中报错，需要重新格式化 NameNode 的话，一定要先停止 namenode 和 datanode 进程，并且要删除所有机器的 data 和 logs 目录，然后再进行格式化。）")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 hadoop-3.1.3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ hdfs namenode "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-format")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("（2）启动HDFS")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 hadoop-3.1.3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ sbin/start-dfs.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("（3）在配置了 "),a("strong",[s._v("ResourceManager")]),s._v(" 的节点（"),a("strong",[s._v("hadoop103")]),s._v("）启动 YARN")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop103 hadoop-3.1.3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ sbin/start-yarn.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("（4）Web 端查看HDFS 的 NameNode")]),s._v(" "),a("p",[s._v("（a）浏览器中输入：http://hadoop102:9870")]),s._v(" "),a("p",[s._v("（b）查看HDFS 上存储的数据信息")]),s._v(" "),a("p",[s._v("（5）Web 端查看 YARN 的ResourceManager")]),s._v(" "),a("p",[s._v("（a）浏览器中输入：http://hadoop103:8088")]),s._v(" "),a("p",[s._v("（b）查看YARN 上运行的Job 信息")]),s._v(" "),a("p",[a("strong",[s._v("3")]),s._v("）集群基本测试")]),s._v(" "),a("p",[s._v("（1）上传文件到集群")]),s._v(" "),a("p",[s._v("➢ 上传小文件")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ hadoop fs "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-mkdir")]),s._v(" /input\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ hadoop fs "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-put")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$HADOOP_HOME")]),s._v("/wcinput/word.txt /input\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("➢ 上传大文件")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ hadoop fs "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-put")]),s._v(" /opt/software/jdk-8u212-linux-x64.tar.gz /\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("（2）上传文件后查看文件存放在什么位置")]),s._v(" "),a("p",[s._v("➢ 查看HDFS 文件存储路径")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 subdir0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),s._v("\n/opt/module/hadoop-3.1.3/data/dfs/data/current/BP-1436128598-192.168.10.102-1610603650062/current/finalized/subdir0/subdir0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("➢ 查看HDFS 在磁盘存储文件内容")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 subdir0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" blk_1073741825\nhadoop "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v("\nhadoop mapreduce\natguigu\natguigu\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("（3）拼接")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("-rw-rw-r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" atguigu atguigu "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("134217728")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" 月  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":01 blk_1073741836\n-rw-rw-r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" atguigu atguigu   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048583")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" 月\t "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":01 blk_1073741836_1012.meta\n-rw-rw-r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" atguigu atguigu  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("63439959")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" 月\t "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":01 blk_1073741837\n-rw-rw-r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" atguigu atguigu \t "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("495635")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" 月\t "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":01 blk_1073741837_1013.meta\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 subdir0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" blk_107374183"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("6")]),s._v(">>")]),s._v("tmp.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 subdir0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" blk_107374183"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("7")]),s._v(">>")]),s._v("tmp.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 subdir0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-zxvf")]),s._v(" tmp.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("（4）下载")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop104 software"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ hadoop fs "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-get")]),s._v(" /jdk-8u212-linux-x64.tar.gz ./\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("（5）执行wordcount 程序")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 hadoop-3.1.3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.1.3.jar\nwordcount /input /output\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("3.2.6")]),s._v(" 配置历史服务器")]),s._v(" "),a("p",[s._v("为了查看程序的历史运行情况，需要配置一下历史服务器。具体配置步骤如下：")]),s._v(" "),a("p",[a("strong",[s._v("1")]),s._v("）配置 "),a("strong",[s._v("mapred-site.xml")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 hadoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" mapred-site.xml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("在该文件里面增加如下配置。")]),s._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 历史服务器端地址 --\x3e")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("mapreduce.jobhistory.address"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hadoop102:10020"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 历史服务器 web端地址 --\x3e")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("mapreduce.jobhistory.webapp.address"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hadoop102:19888"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[a("strong",[s._v("2")]),s._v("）分发配置")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 hadoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ xsync "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$HADOOP_HOME")]),s._v("/etc/hadoop/mapred-site.xml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("3")]),s._v("）在 "),a("strong",[s._v("hadoop102")]),s._v(" 启动历史服务器")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 hadoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ mapred "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--daemon")]),s._v(" start historyserver\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("4")]),s._v("）查看历史服务器是否启动")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 hadoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ jps\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("5")]),s._v("）查看 "),a("strong",[s._v("JobHistory")])]),s._v(" "),a("p",[s._v("http://hadoop102:19888/jobhistory")]),s._v(" "),a("h3",{attrs:{id:"_3-2-7-配置日志的聚集"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-7-配置日志的聚集"}},[s._v("#")]),s._v(" 3.2.7 配置日志的聚集")]),s._v(" "),a("p",[s._v("日志聚集概念：应用运行完成以后，将程序运行日志信息上传到HDFS 系统上。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo3/202502192106895.png",alt:"image-20250219210618826"}})]),s._v(" "),a("p",[s._v("日志聚集功能好处：可以方便的查看到程序运行详情，方便开发调试。")]),s._v(" "),a("p",[s._v("注意：开启日志聚集功能，需要重新启动 NodeManager 、ResourceManager 和HistoryServer。")]),s._v(" "),a("p",[s._v("开启日志聚集功能具体步骤如下：")]),s._v(" "),a("p",[a("strong",[s._v("1")]),s._v("）配置 "),a("strong",[s._v("yarn-site.xml")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 hadoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" yarn-site.xml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("在该文件里面增加如下配置。")]),s._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 开启日志聚集功能 --\x3e")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("yarn.log-aggregation-enable"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("true"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 设置日志聚集服务器地址 --\x3e")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("yarn.log.server.url"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("http://hadoop102:19888/jobhistory/logs"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 设置日志保留时间为 7天 --\x3e")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("yarn.log-aggregation.retain-seconds"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("604800"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("p",[a("strong",[s._v("2")]),s._v("）分发配置")]),s._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[s._v("[atguigu@hadoop102 hadoop]$ xsync $HADOOP_HOME/etc/hadoop/yarn-site.xml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("3")]),s._v("）关闭 "),a("strong",[s._v("NodeManager")]),s._v(" 、"),a("strong",[s._v("ResourceManager")]),s._v(" 和"),a("strong",[s._v("HistoryServer")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop103 hadoop-3.1.3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ sbin/stop-yarn.sh\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop103 hadoop-3.1.3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ mapred "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--daemon")]),s._v(" stop historyserver\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("4")]),s._v("）启动 "),a("strong",[s._v("NodeManager")]),s._v(" 、"),a("strong",[s._v("ResourceManage")]),s._v(" 和 "),a("strong",[s._v("HistoryServer")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop103 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ start-yarn.sh\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ mapred "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--daemon")]),s._v(" start historyserver\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("5")]),s._v("）删除 "),a("strong",[s._v("HDFS")]),s._v(" 上已经存在的输出文件")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ hadoop fs "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" /output\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("6")]),s._v("）执行 "),a("strong",[s._v("WordCount")]),s._v(" 程序")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 hadoop-3.1.3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.1.3.jar\nwordcount /input /output\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("7")]),s._v("）查看日志")]),s._v(" "),a("p",[s._v("（1）历史服务器地址")]),s._v(" "),a("p",[s._v("http://hadoop102:19888/jobhistory")]),s._v(" "),a("p",[s._v("（2）历史任务列表")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo3/202502192109317.png",alt:"image-20250219210940249"}})]),s._v(" "),a("p",[s._v("（3）查看任务运行日志")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo3/202502192110315.png",alt:"image-20250219211013253"}})]),s._v(" "),a("p",[s._v("（4）运行日志详情")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo3/202502192110927.png",alt:"image-20250219211037858"}})]),s._v(" "),a("h3",{attrs:{id:"_3-2-8-集群启动-停止方式总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-8-集群启动-停止方式总结"}},[s._v("#")]),s._v(" 3.2.8 集群启动**/**停止方式总结")]),s._v(" "),a("p",[a("strong",[s._v("1")]),s._v("）各个模块分开启动**/"),a("strong",[s._v("停止（配置")]),s._v("ssh** 是前提）常用")]),s._v(" "),a("p",[s._v("（1）整体启动/停止HDFS")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("start-dfs.sh/stop-dfs.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("（2）整体启动/停止YARN")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("start-yarn.sh/stop-yarn.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("2")]),s._v("）各个服务组件逐一启动**/**停止")]),s._v(" "),a("p",[s._v("（1）分别启动/停止HDFS 组件")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("hdfs "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--daemon")]),s._v(" start/stop namenode/datanode/secondarynamenode\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("（2）启动/停止YARN")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--daemon")]),s._v(" start/stop resourcemanager/nodemanager\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_3-2-9-编写-hadoop-集群常用脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-9-编写-hadoop-集群常用脚本"}},[s._v("#")]),s._v(" 3.2.9 编写 "),a("strong",[s._v("Hadoop")]),s._v(" 集群常用脚本")]),s._v(" "),a("p",[a("strong",[s._v("1")]),s._v("）"),a("strong",[s._v("Hadoop")]),s._v(" 集群启停脚本（包含 "),a("strong",[s._v("HDFS")]),s._v("，"),a("strong",[s._v("Yarn")]),s._v("，"),a("strong",[s._v("Historyserver")]),s._v("）："),a("strong",[s._v("myhadoop.sh")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home/atguigu/bin\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" myhadoop.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("➢ 输入如下内容")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$#")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-lt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"No Args Input..."')]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"start"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('" =================== 启动 hadoop集群 ==================="')]),s._v("\n\t\t\t\t\n        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('" --------------- 启动 hdfs ---------------"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" hadoop102 "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/opt/module/hadoop-3.1.3/sbin/start-dfs.sh"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('" --------------- 启动 yarn ---------------"')]),s._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" hadoop103 "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/opt/module/hadoop-3.1.3/sbin/start-yarn.sh"')]),s._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('" --------------- 启动 historyserver ---------------"')]),s._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" hadoop102 "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/opt/module/hadoop-3.1.3/bin/mapred --daemon start historyserver"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"stop"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('" =================== 关闭 hadoop集群 ==================="')]),s._v("\n\t\t\t\t\n        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('" --------------- 关闭 historyserver ---------------"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" hadoop102 "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/opt/module/hadoop-3.1.3/bin/mapred --daemon stop historyserver"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('" --------------- 关闭 yarn ---------------"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" hadoop103 "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/opt/module/hadoop-3.1.3/sbin/stop-yarn.sh"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('" --------------- 关闭 hdfs ---------------"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" hadoop102 "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/opt/module/hadoop-3.1.3/sbin/stop-dfs.sh"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Input Args Error..."')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("esac")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br")])]),a("p",[s._v("➢ 保存后退出，然后赋予脚本执行权限")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x myhadoop.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("2")]),s._v("）查看三台服务器 "),a("strong",[s._v("Java")]),s._v(" 进程脚本："),a("strong",[s._v("jpsall")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home/atguigu/bin\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" jpsall\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("➢ 输入如下内容")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("host")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" hadoop102 hadoop103 hadoop104\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),s._v(" jps\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("➢ 保存后退出，然后赋予脚本执行权限")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x jpsall\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("3")]),s._v("）分发**/home/atguigu/bin** 目录，保证自定义脚本在三台机器上都可以使用")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ xsync /home/atguigu/bin/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_3-2-10-常用端口号说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-10-常用端口号说明"}},[s._v("#")]),s._v(" 3.2.10 常用端口号说明")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo3/202502192118955.png",alt:"image-20250219211812887"}})]),s._v(" "),a("h3",{attrs:{id:"_3-2-11-集群时间同步"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-11-集群时间同步"}},[s._v("#")]),s._v(" 3.2.11 集群时间同步")]),s._v(" "),a("p",[s._v("如果服务器在公网环境（能连接外网），可以不采用集群时间同步，因为服务器会定期和公网时间进行校准；")]),s._v(" "),a("p",[s._v("如果服务器在内网环境，必须要配置集群时间同步，否则时间久了，会产生时间偏差，导致集群执行任务时间不同步。")]),s._v(" "),a("p",[a("strong",[s._v("1")]),s._v("）需求")]),s._v(" "),a("p",[s._v("找一个机器，作为时间服务器，所有的机器与这台集群时间进行定时的同步，生产环境根据任务对时间的准确程度要求周期同步。测试环境为了尽快看到效果，采用 1 分钟同步一次。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo3/202502192121836.png",alt:"image-20250219212104763"}})]),s._v(" "),a("p",[a("strong",[s._v("2")]),s._v("）时间服务器配置（必须 "),a("strong",[s._v("root")]),s._v(" 用户）")]),s._v(" "),a("p",[s._v("（1）查看所有节点ntpd 服务状态和开机自启动状态")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl status ntpd\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start ntpd\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl is-enabled ntpd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("（2）修改hadoop102 的 ntp.conf 配置文件")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/ntp.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("修改内容如下")]),s._v(" "),a("p",[s._v("（a）修改 1（授权 192.168.10.0-192.168.10.255 网段上的所有机器可以从这台机器上查询和同步时间）")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#restrict 192.168.10.0 mask 255.255.255.0 nomodify notrap")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("为")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("restrict "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.0 mask "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".255.0 nomodify notrap\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("（b）修改2（集群在局域网中，不使用其他互联网上的时间）")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("server "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".centos.pool.ntp.org iburst\nserver "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".centos.pool.ntp.org iburst\nserver "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".centos.pool.ntp.org iburst\nserver "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".centos.pool.ntp.org iburst\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("为")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#server 0.centos.pool.ntp.org iburst")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#server 1.centos.pool.ntp.org iburst")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#server 2.centos.pool.ntp.org iburst")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#server 3.centos.pool.ntp.org iburst")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("（c）添加 3 （当该节点丢失网络连接，依然可以采用本地时间作为时间服务器为集群中的其他节点提供时间同步）")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("server "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.127")]),s._v(".1.0\nfudge "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.127")]),s._v(".1.0 stratum "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("（3）修改hadoop102 的/etc/sysconfig/ntpd 文")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/sysconfig/ntpd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("增加内容如下（让硬件时间与系统时间一起同步）")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SYNC_HWCLOCK")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("（4）重新启动ntpd 服务")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start ntpd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("（5）设置ntpd 服务开机启动")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" ntpd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("3")]),s._v("）其他机器配置（必须 "),a("strong",[s._v("root")]),s._v(" 用户）")]),s._v(" "),a("p",[s._v("（1）关闭所有节点上ntp 服务和自启动")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop103 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl stop ntpd\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop103 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl disable ntpd\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop104 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl stop ntpd\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop104 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl disable ntpd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("（2）在其他机器配置 1 分钟与时间服务器同步一次")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop103 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("crontab")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("编写定时任务如下：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("*/1 * * * * /usr/sbin/ntpdate hadoop102\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("（3）修改任意机器时间")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop103 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2021-9-11 11:11:11"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("（4）1 分钟后查看机器是否与时间服务器同步")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop103 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h1",{attrs:{id:"第-4-章-常见错误及解决方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第-4-章-常见错误及解决方案"}},[s._v("#")]),s._v(" 第 4 章 常见错误及解决方案")]),s._v(" "),a("p",[s._v("1）防火墙没关闭、或者没有启动YARN")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("INFO client.RMProxy: Connecting to ResourceManager at hadoop108/192.168.10.108:8032\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("2）主机名称配置错误")]),s._v(" "),a("p",[s._v("3）IP 地址配置错误")]),s._v(" "),a("p",[s._v("4）ssh 没有配置好")]),s._v(" "),a("p",[s._v("5）root 用户和atguigu 两个用户启动集群不统一")]),s._v(" "),a("p",[s._v("6）配置文件修改不细心")]),s._v(" "),a("p",[s._v("7）不识别主机名称")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("java.net.UnknownHostException: hadoop102: hadoop102\nat java.net.InetAddress.getLocalHost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("InetAddress.java:1475"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nat org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Job Submitter.java:146"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nat org.apache.hadoop.mapreduce.Job"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$10")]),s._v(".run"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Job.java:1290"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nat org.apache.hadoop.mapreduce.Job"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$10")]),s._v(".run"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Job.java:1287"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nat java.security.AccessController.doPrivileged"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Native Method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nat javax.security.auth.Subject.doAs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Subject.java:415"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("解决办法：")]),s._v(" "),a("p",[s._v("（1）在/etc/hosts 文件中添加192.168.10.102 hadoop102")]),s._v(" "),a("p",[s._v("（2）主机名称不要起 hadoop hadoop000 等特殊名称")]),s._v(" "),a("p",[s._v("8）DataNode 和NameNode 进程同时只能工作一个。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/onetioner/img/main/PicGo3/202502192128705.png",alt:"image-20250219212847624"}})]),s._v(" "),a("p",[s._v("9）执行命令不生效，粘贴 Word 中命令时，遇到-和长–没区分开。导致命令失效")]),s._v(" "),a("p",[s._v("解决办法：尽量不要粘贴Word 中代码。")]),s._v(" "),a("p",[s._v("10）jps 发现进程已经没有，但是重新启动集群，提示进程已经开启。")]),s._v(" "),a("p",[s._v("原因是在 Linux 的根目录下/tmp 目录中存在启动的进程临时文件，将集群相关进程删")]),s._v(" "),a("p",[s._v("除掉，再重新启动集群。")]),s._v(" "),a("p",[s._v("11）jps 不生效")]),s._v(" "),a("p",[s._v("原因：全局变量 hadoop java 没有生效。解决办法：需要source /etc/profile 文件。")]),s._v(" "),a("p",[s._v("12）8088 端口连接不上")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 桌面"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /etc/hosts\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("注释掉如下代码")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#::1 hadoop102")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);