# 第一周：程序设计与C语言

# 1. 计算机和编程语言

## 1.1 计算机和编程语⾔

> 计算机怎么做事情的，编程语言是什么

### （1）计算机是生活必需品

- 如果想要⾃己设计⼀些功能和⾏为，让计算机按照你的意图做事情，就需要写程序了

- 本课程的主要的目的是通过学习编程，来理解计算机是如何解决问题的，理解计算机的能与不能，擅⻓与⾮擅⻓

计算机如何解决问题

### （2）计算机如何解决问题

- “请给我⼀一杯水”

1. 转⾝走到厨房；

2. 找到一个杯子；

3. 找到一个水壶；

4. 在杯子中倒入一些⽔；

5. 拿着杯子走回桌子。

> 人：What to do
>
> 计算机：How to do

### （3）计算机语言

- 程序是用特殊的编程语言写出来表达如何解决问题的
- 不是⽤编程语⾔来和计算机交谈，⽽是描述要求它如何做事情的过程或方法

### （4）计算机的语⾔

十六进制的一段程序：

![image-20250109214818217](https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202501092148264.png)

原来的样子是：

```c
int u = 32;
int v = 26;
while ( v!=0 ) {
  int temp = u%v;
  u = v;
  v = temp;
}
printf("%d",u);
```

### （5）辗转相除法

上述代码其实是在辗转相除法

1. 如果v等于0，计算结束，u就是最⼤公约数；

2. 如果v不等于0，那么计算u除以v的余数，让u等于v，而v等于那个余数；

3. 回到第一步。

### （6）计算机-程序-算法

![image-20250109215554027](https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202501092155070.png)

计算机懂的东西：如上述十六进制代码

程序员懂的东西：程序

普通人懂的东西：如何去做计算的步骤，也就是算法

### （7）算法

- 我们要让计算机做计算,就需要像这样找出计算的步骤，然后⽤编程语言写出来
- 计算机做的所有的事情都叫做计算
- 计算的步骤就是算法



**讨论**

关于编程语言和计算机

- 计算机里的CPU可以直接运行人类编写的程序吗？为什么说编程语言不是和计算机交谈的语言？

  > 不可以，因为人类编写的程序需要被编译成机器语言，计算机才能读懂，程序语言只能是告诉计算机去做什么，而不是交流的语言，交流的语言应该是在计算机上进行的操作

## 1.2 计算机的思维方式

> 重复是计算机最擅长的

### （1）计算机的思维

- 2x + 6 = 20

  -  解⽅程

    > 人：普通的解方程方式

  - 枚举

    > 计算机：一枚一枚的举出来，代入数字一个个试，缺点可能会较慢

  -  ⼆分搜索

    > 为了让计算机算得更快，我们就会有各种各样的算法，
    >
    > 例如，假设已知x的范围在1\~10之间。先假设x=5，计算为16，小于20，说明x要在5的右边去找。接下来就在5\~10之间去试，假如是7，计算为20，得出答案。称为二分法

### （2）枚举求最⼤公约数

1. 设t为2；

2. 如果u和v都能被t整除，则记下这个t

3. t加1后重复第2步，直到t等于u或v；

4. 那么，曾经记下的最大的可以同时整除u和v的t就是gcd

### （3）程序的执⾏

- 解释：借助⼀个程序，那个程序能试图理解你的程序，然后按照你的要求执⾏

- 编译：借助⼀个程序，就像⼀个翻译，把你的程序翻译成计算机真正能懂的语言——机器语言——写的程序，然后，这个机器语⾔写的程序就能直接执行了

### （4）解释语言vs编译语⾔

- 语⾔本⽆编译/解释之分

  > 任何一种语言既可解释执行，也可以编译执行，只是传统和习惯的问题，只是某种语言常用的程序执行方式是什么。
  >
  > 例如，经常听到说C语言是编译型语言，没错，因为一般我们写出C语言程序以后，需要先编译，再运行，但也有人去做了C语言的解释器。
  >
  > 例如，一般说Python语言是一个解释型语言，因为不需要编译，直接拿源代码去执行，但也有人愿意的话，也可以去做它的编译器。

- 常用的执⾏方式而已

- 解释型语言有特殊的计算能力

  > 因为源代码在执行的过程当中不断地去被解读，那么有可能可以做一些特殊的事情，比方说，运行过程中源代码是不是可以被修改等等。
  >
  > 过去，一般说解释型语言会运行的比较慢，因为不是直接在计算机上运行，需要有一个程序帮助运行代码。
  >
  > 但是现在，我们看到解释型语言运行效率和编译型语言效率，已经不是重要的问题，因为计算机的速度已经到了比较高的层次上面，在那个速度下，解释和编译它的运行性能并不是太大差异

- 编译型语⾔有确定的运算性能

  > 编译型语言中，同样的程序在运行当中，是这么快就这么快，有一个明确的运算性能。今天来说，这两种执行方式已经没有非常大的本质上的区别，只是传统和喜好问题



**讨论**

编译执行与解释执行

- 有的编程语言，源代码经过编译后形成目标代码，但是这样的目标代码不能直接在CPU上执行，而是需要由一个仿真器程序来解释执行。这样的执行方式是编译的还是解释的？

  > 判断是解释执行还是编译执行最根本的方法是判断是否产生可直接运行的机器代码。
  >
  > 编译执行的步骤，一般包括：编译、链接和执行。在编译、链接后，会产生可直接运行的机器代码，在产生机器代码之后，可以单独运行执行（VC中的！DEV-C++中的F10）程序即可重复运行。不需要再次编译和链接。
  >
  > 在本题中，目标代码必须要仿真器程序才能得到再次执行，说明在执行过程中没有产生并保存机器代码。仿真器程序的本质还是对目标代码进行逐条解释，并执行。所以，认为是解释执行的。

# 2. C语⾔

## 2.1 为什么是C

> C语言在工业界有重要地位，在很多领域无可替代

### （1）为什么是C？

![image-20250109225635693](https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202501092256728.png)

[现已更新](https://www.tiobe.com/tiobe-index/)

![image-20250109230357213](https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202501092303240.png)

![image-20250109230309440](https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202501092303481.png)

### （2）其他语言？

- 现代的编程语言在语法上的差异很小
  - 几乎都是C-like语⾔言

- 语⾔的能力/适⽤领域主要是由
  - 库和
  - 传统所决定的

```c
#include <stdio.h>

int main()
{
  	printf("Hello World!\n");
  
  	return 0
}
```

```java
class Hello {
  	public static void main(String[] args) {
      		System.out.println("Hello World!");
    }
}
```

```python
print "Hello World!\n"
```

## 2.2 简单历史

> 关于C语言和版本的极其简单的历史

### （1）“it was the summer of ‘69”

![image-20250109231021785](https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202501092310834.png)

### （2）C语⾔

- C语言是从B语⾔发展⽽来的，B语言是从BCPL发展⽽来的，BCPL是从FORTRAN发展而来的
- BCPL和B都支持指针间接⽅式，所以C也⽀持了
-  C语言还受到了PL/I的影响，还和PDP-11的机器语言有很⼤的关系
- 1973年3⽉，第三版的Unix上出现了C语言的编译器
- 1973年11月，第四版的Unix（System Four）发布了，这个版本是完全用C语言重新写的

### （3）C的发展与版本-K&R

- 经典 C
  - 又被叫做 “K&R the C”
  - The C Programming Language, by Brian Kernighan and Dennis Ritchie, 2nd Edition, Prentice Hall

<img src="/Users/onesion/Library/Application Support/typora-user-images/image-20250109231647209.png" alt="image-20250109231647209" style="zoom:25%;" />

### （4）C的发展与版本-标准

- 1989年ANSI发布了一个标准——ANSI C
- 1990年ISO接受了ANSI的标准——C89
- C的标准在1995年和1999年两次更新——C95和C99
- 所有的当代编译器都⽀持C99了

### （5）C语言用在哪里？

- 操作系统
-  嵌⼊式系统
- 驱动程序
- 底层驱动
  - 图形引擎、图像处理、声⾳效果

### （6）C是⼀种工业语言

![image-20250109232040067](https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202501092320099.png)

### （7）编译—>运⾏

- C需要被编译才能运行，所以你需要
  - 编辑器
  - 编译器
  - 或者，IDE（集成开发环境）

### （8）推荐的编程软件

- Dev C++（4.9 for Win7, 5.0 for Win8）
  -  免费
  -  安装简单
  - 不⽤用建工程

### （9）其他选择

- MS Visual Studio Express（Windows）
-  Xcode（Mac OS X）
- Eclipse-CDT
- Geany（和MinGW⼀一起）
- Sublime（和MinGW⼀一起）
- vim/emacs（和MinGW⼀一起）

# 3. 第一个程序

## 3.1 Windows安装编程软件

### （1）初学C的困惑

- 用什么软件好？
-  选择太多有时候是个⿇烦
- 当代语⾔往往只有⼀个编程软件可用
  -  那就Dev C++ 5.6.3吧！

## 3.2 第一个C程序

> 如何在Dev C++中编辑、编译和运行程序

### （1）第一个C程序

```c
#include <stdio.h>

int main()
{
  printf("Hello World!\n");
  
  return 0;
}
```

### （2）在Dev C++⾥

![image-20250109233405774](https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202501092334815.png)

### （3）程序框架

```c
#include <stdio.h>

int main()
{
  printf("Hello World!\n");
  
  return 0;
}
```

- 本课程中所有的程序都需要这一段

- 直到学函数之前，我们的代码都只是在这个框架中间

### （4）输出

-  `printf("Hello World!\n");`
-  `""`⾥面的内容叫做“字符串”，`printf`会把其中的内容原封不动地输出
- `\n`表⽰需要在输出的结果后⾯换⼀⾏

### （5）暂停

- 如果你在使用`Dev C++ 4.9.9.2`
  - `system("pause");`
-  让程序运⾏行完成后，窗⼝口还能留下
  -  不是`Dev C++ 4.9.9.2`就不需要这个了

### （6）程序中的错误

<img src="https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202501092342751.png" alt="image-20250109234253708" style="zoom: 33%;" />

- 编译的时候发现的错误所在的地⽅方会以红⾊的底表示出来
- 具体的错误原因列在下⽅的窗⼝里（是英⽂的）
- C的编译器给出的错误提示往往不那么好“猜”

### （7）不要⽤中⽂！！！

- 中国学⽣还有一个极其常见的低级错误，就是⽤了中⽂输入法来输⼊程序。那些标点符号，在中⽂和英⽂可能看上去相似，但是对于计算机是完全不同的符号，如果你还开了全角标点的话，问题就更严重了

## 3.3 关于那个0

与我们打出的`0`显示不一样，意思一样

![image-20250109233405774](https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202501092355627.png)

## 3.4 MacOS安装编程软件

可以直接安装`Xcode`

也可以在终端输入`gcc`，会提示获取`Xcode`或者安装命令行开发者工具

回到终端输入`gcc`，显示`no input files`，说明安装成功了

可以输入`gcc --version`

## 3.5 Mac OS X如何在命令行编辑、编译和运行C程序

可以用`Xcode`，相对`Dev C++`大了点，因为它可以做更强大的事情



可以选择轻量级的小工具，例如`SUBLIME TEXT`

```c
#include "stdio.h"

int main(int argc, char const *argv[])
{
  	printf("Hello World!\n");
 		return 0;
}
```

保存为`hello.c`，如果配好了C语言的环境，可以`cmd+B`编译，可以运行`shift+cmd+B`，结果就直接出来了

>Sublime Text是一个文本编辑器，并不是一个集成开发环境，但是它让你可以去配，调一个什么样的编译器的命令，然后怎么样地去运行你的代码，但是运行C语言的程序、Python语言、其他语言都有同样一个问题，就是只能运行程序，不能在程序里面做任何的输入，有输入的程序就得离开Sublime Text，得进入到终端



如果在命令行自己编译这个hello.c

```shell
gcc hello.c
```

会产生`a.out`，而不是`hello`，如果编译的时候不指定名称，所有程序产生的都是`a.out`

执行`a.out`

```shell
./a.out
```

输出

```shell
Hello World!
```

如果切换Sublime Text和终端较费劲，可以考虑使用vi编辑器，这是一个全屏的编辑器，但是是在终端底下的，不是图形界面的

```shell
i
ESC
:wq
```

## 3.6 做计算

### （1）做计算

```c
#include <stdio.h>

int main()
{
  	printf("%d", 12+34);
  
  	return 0;
}
```

-  `printf("%d\n", 23+43);`
  - `%d`说明后面有一个整数要输出在这个位置上
- ` printf("23+43=%d\n", 23+43);`

### （2）四则运算

| 四则运算 | C符号 | 意义 |
| :------: | :---: | :--: |
|    \+    |  \+   |  加  |
|    \-    |  \-   |  减  |
|    ×     |  \*   |  乘  |
|    ÷     |   /   |  除  |
|          |   %   | 取余 |
|    ()    |  ()   | 括号 |

- `%`表⽰取两个数相除以后的余数



**讨论**

我们是在学习GCC吗？

- 常听到有人说他学的是Visual C，有人学的是Turbo C，不是我们学的什么Dev C，是他们的比我们的高级吗？还有GCC到底是什么？

  > 都是编译器，只是平台不同。早期的GCC的全拼为GNU C Compiler，即GUN计划诞生的C语言编译器，显然最初GCC的定位确实只用于编译C语言。但经过这些年不断的迭代，GCC的功能得到了很大的扩展，它不仅可以用来编译C语言程序，还可以处理C++、Go、Object-C等多种编译语言编写的程序。与此同时，由于之前的GNU C Compiler已经无法完美诠释GCC的含义，所以其英文全称被重新定义为GNU Compiler Collection，即GNU编译器套件。



main()的样子

- 为什么看到有的书上的main()是void main()，而我们课件上是int main()？还有main()里面那句return 0;是必须的吗？

  > int main()是需要返回数值的，所以需要return 0;
  >
  > void main()是不需要返回数值的，return 0;不是必须的

### （3）第⼀周的练习

- 在⾃己的计算机上安装好编程的软件
- 依次下载/拷贝课程网站上的四个程序
-  编译并运⾏
- 结果如何
-  有没有问题—>来讨论区讨论吧！
-  尝试理解

```d
#include <stdio.h>
  
int main()
{
  	printf("Hello World!\n");
  
  	return 0;
}
```

```c
#include <stdio.h>

int main()
{
  	printf("你好！\n");
  	
  	return 0;
}
```

```c
#include <stdio.h>

int main()
{
  	printf("23+43=%d\n",23+43);
  
  	return 0;
}
```

```c
#include <stdio.h>

int main()
{
  	int price = 0;
  	
  	printf("请输入金额（元）：");
  	scanf("%d",&price);
  
  	int change = 100 - price;
  
  	printf("找您%d元。\n", change);
  
  	return 0;
}
```

## 3.7 其他

### （1）关于gcc

我们都知道C语言和UNIX一起成长起来的，在最初UNIX系统里头，并不会有人要从另外的地方下载、安装一个C语言编译器。

 如果你购买了一台UNIX机器，那上面就有一个C语言编译器，那个编译器就叫做CC（C Compiler），所以从七十年代一直再到九十年代后期，所有UNIX机器都有一个CC。 

然后在九十年代早期开始，GNU出现了，做了一个编译器叫GCC。GCC出来之后，打败了各个UNIX厂家自己做的CC。

 CC、GCC这些一开始都是在UNIX上面的，在DOS上面，实际上很早在九十年代早期就已经有MSCC（微软的CC，在DOS上跑的），那么GCC一直都是UNIX的，到了九十年代中期，Linux出现以后，GCC也是跑在Linux之上的一个编译器。

 但是在个人计算机领域，Windows是主流的市场，所以一直有人希望在Windows上面也能跑GCC。因为Windows上面，过去传统用的，就是微软从MSCC又发展到后面编程的Visual Studio里面的CC，这就是大家所熟悉的VC，比如VC6，一直到现在Visual Studio里面的更新的版本，比如VS 20XX版本。

 人们想要做的事情就是，GNU CC这么一个优秀的编译器能不能在Windows上面去跑，要想跑在Windows上面，其实涉及到两个问题。

首先第一个问题就是我们有一个编译器GCC，这个编译器本身可能也是C语言定的，它要运行在某个操作系统之上，这个操作系统过去是UNIX，现在变成了Windows，那么区别是什么呢？

操作系统对应用程序提供API，有一层应用程序接口，那么这一层应用程序接口过去是UNIX的，现在是Windows，所以要把GCC移植到Windows上去，让它能在Windows上去跑，第一件事情是移植GCC本身，第二件事情是一个.c文件，最后能够变成一个可执行的东西，比如在Windows上面是.exe文件，一个.c变成.exe这个过程当然是GCC去做的努力，但是在这个努力当中，除了自己写的代码之外，实际上，比如说printf代码在哪呢？你需要有一个库Library，你的CC会拿你的.c去和Library合并去形成一个.exe。因此，当你的一个程序经过GCC的动作要变成可以在Windows上运行的.exe，那么除了GCC要移植过去之外，第二件事情就是Library也需要在Windows上能够运行。

因此，在做这件事情的时候，人们有两个不同的做法。一个做法叫做cygwin，或者说以cygwin为代表的一种做法，这种做法是提供一个UNIX的Library，这个Library底下是Windows，因此一个.c经过这个Library的努力，变成一个可以在Windows上运行的UNIX程序，在cygwin底下的GCC去编译的程序并不是在Windows上直接运行的，而是UNIX上面可以运行，但是cygwin给了你一个在Windows上运行的UNIX程序的接口，于是你的程序就可以运行了。

第二种做法就是以MinGW（min gnu for windows）为代表的，它的做法同样是GCC编译了.c文件以后，配合的是一个WinLib，最后形成的是win中的.exe。

从我们写程序的角度，这两个做法都差不多，只不过看你想要写出来一个Windows的程序还是UNIX程序，但是我们现在，其实绝大多数情况下，我们之所以会在Windows上去用GCC只是说我们想要利用GNU这么一个编译器，但是最后很可能我们在实际工作当中，我们做的是一个交叉编译这么一个东西，在Windows上编译，跑到一个单片机等等上去跑。

这个MInGW其实已经停更很多年了，那现在新的版本是什么呢？又出现了分化，原来的原生是MinGW32，现在有64，64是一个不错的MinGW版本，它可以用于64位的机器，现在绝大多数机器是64位的，可是还有另外一个TDM-GCC，其实也是更MinGW类似的做法，但是是另外一个独立机构做的，现在其实还会有另外一个选择，clang-llvm组合，也可以用在Windows上面，所以现在其实我们有很多不同的选择。

在本课程推荐使用TDM-GCC，唯一原因就是安装简单，装一个东西就可以把所有东西装完了，

### （2）Windows安装TDM-GCC

安装过程有需要再看，或者直接网上搜索

### （3）安装Visual Studio Code

网上搜教程

### （4）VSCode的工作区

略



