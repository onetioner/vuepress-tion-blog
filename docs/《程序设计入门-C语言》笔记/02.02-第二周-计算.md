# 第二周：计算

# 1. 变量

## 1.1 变量定义

> 变量是做什么的，如何定义一个变量

### （1）做计算

```c
#include <stdio.h>

int main()
{
  	printf("23+43=%d\n");
  	
  	return 0;
}
```

### （3）算找零

```c
#include <stdio.h>

int main()
{
  	printf("100-23=%d\n", 100-23);
  
  	return 0;
}
```

- 如何能在程序运⾏时输⼊那个数字23，然后计算输出结果？
  - 需要：
    - 有地⽅放输⼊的数字；
    -  有办法输⼊数字；
    - 输入的数字能参与计算。

### （4）change.c

>今后课件上的程序都只有main的{}⾥里⾯面的部分

```c
#include <stdio.h>

int main()
{
  	int price = 0;
  	
  	printf("请输入金额（元）：");
  	scanf("%d", &price);
  
  	int change = 100 - price;
  
  	printf("找您%d元。\n", change);
  
  	return 0;
}
```

### （5）如何输入

- 输⼊也在终端窗口中
- 输⼊是以⾏为单位进行的，行的结束标志就是你按下了回车键。在你按下回车之前，你的程序不会读到任何东⻄

### （6）变量

- `int price = 0;`
- 这⼀⾏，定义了一个变量。变量的名字是`price`，类型是`int`，初始值是`0`。
- 变量是一个保存数据的地方，当我们需要在程序⾥保存数据时，⽐如上⾯的例子中要记录⽤户输入的价格，就需要⼀个变量来保存它。用⼀个变量保存了数据，它才能参加到后面的计算中，⽐如计算找零。

### （7）变量定义

- 变量定义的一般形式就是：
  - <类型名称> <变量名称>;
- `int price;`
- `int amount;`
- ` int price,amount;`

### （8）变量的名字

- 变量需要⼀个名字，变量的名字是⼀种“标识符”，意思是它是⽤来识别这个和那个的不同的名字。
-  标识符有标识符的构造规则。基本的原则是：
  - 标识符只能由字⺟、数字和下划线组成，
  - 数字不可以出现在第一个位置上，
  - C语⾔的关键字（有的地⽅方叫它们保留字）不可以⽤做标识符。

### （9）C语⾔的保留字

> 不需要背诵

```c
auto,break,case,char,const,
continue,default,do,double,
else,enum,extern,float,for,
goto,if,int,long,register,return,
short,signed,sizeof,static,
struct,switch,typedef,union,
unsigned,void,volatile,while,
inline,restrict
```



## 1.2 变量赋值与初始化

> 以及如何读输入的数字

### （1）赋值与初始化

- `int price = 0;`
- 这一行，定义了⼀一个变量。变量的名字是`price`，类型是`int`，初始值是`0`。
- `price = 0`是⼀个式⼦子，这⾥里的“＝”是⼀一个赋值运算符，表⽰示将“＝”右边的值赋给左边的变量。

### （2）赋值

- 和数学不同，`a=b`在数学中表示关系，即a和b的值一样；
- ⽽在程序设计中，`a=b`表⽰要求计算机做一个动作：将b的值赋给a。
- 关系是静态的，⽽动作是动态的。
- 在数学中，`a=b`和`b=a`是等价的，⽽在程序设计中，两者的意思完全相反

### （3）初始化

- 当赋值发⽣在定义变量的时候，就像`int price = 0;`，就是变量的初始化。虽然C语⾔并没有强制要求所有的变量都在定义的地⽅方做初始化，但是所有的变量在第⼀次被使⽤用（出现在赋值运算符的右边）之前被应该赋值⼀一次
- 如果没有初始化？

### （4）变量初始化

- <类型名称> <变量名称> = <初始值>;
  - int price = 0;
  -  int amount = 100;
-  组合变量定义的时候，也可以在这个定义中单独给单个变量赋初值，如：
  - int price = 0, amount = 100;

### （5）表达式

- “＝”是赋值运算符，有运算符的式⼦子就叫做表达式。
-  `price = 0;`
-  `change = 100 - price;`

### （6）变量类型

- `int price = 0;`
-  这⼀行，定义了一个变量。变量的名字是`price`，类型是`int`，初始值是`0`。
- C是⼀种有类型的语⾔言，所有的变量在使用之前必须定义或声明，所有的变量必须具有确定的数据类型。
- 数据类型表示在变量中可以存放什么样的数据，变量中只能存放指定类型的数据，程序运行过程中也不能改变变量的类型。

### （7）第⼆个变量

-  `int change = 100 - price;`
- 定义了第⼆个变量`change`
- 并且做了计算

> C99的写法，允许在程序任何地方定义变量，只要它出现在这个变量的第一次使用之前，无论是放在赋值号的左边还是放在右边

### （8）ANSI C

> 这种传统写法

- 只能在代码开头的地方定义变量

**C99写法**

```c
#include <stdio.h>

int main()
{
  	int price = 0;
  	
  	printf("请输入金额（元）：");
  	scanf("%d", &price);
  
  	int change = 100 - price;
  
  	printf("找您%d元。\n", change);
  
  	return 0;
}
```

**ANSI C写法**

```c
#include <stdio.h>

int main()
{
  	int price = 0;
  	int change = 0;
  
  	printf("请输入金额（元）：");
  	scanf("%d", &price);
  
  	change = 100 - price;
  
  	printf("找您%d元。\n", change);
  
  	return 0;
}
```

### （9）读整数

-  `scanf("%d", &price);`
- 要求`scnaf`这个函数读入下一个整数，读到的结果赋值给变量`price`
- ⼩心`price`前⾯的`&`

## 1.3 关于scanf

```c
#include <stdio.h>

int main()
{
  	int a = 0;
  	int b = 0;
  
  	scanf("%d %d", &a, &b);
  
  	printf("%d %d\n", a, b);
    
  	return 0;
}
```

- `scanf`中，出现在格式字符串里面所有的东西都是它要读取的内容，目前是`"%d %d"`，中间有个空格。
- `%d`就表明它要在这里读取一个整数，交给后面的某一个变量。如果`%lf`表示读取一个浮点数。
- 其他的东西是它要你输入的内容，它必须要得到那个内容才能够继续下去，目前这里是空格，是要输入的内容，如果中间是个逗号，就要输入逗号
- 如果中间改为逗号，输入`1 2`，结果是`1 0`，说明没有读取到`b`，程序是出错的。我们应该输入`1,2`，结果就是`1 2`。因为在程序中我需要这两个数字中间有逗号。
- 所以同样的，如果我在后面有一个空格是什么意思呢？如`“%d %d ”`，输入`1 2`，还要再给一个空格才行，再回车也没用，因为它没有得到那个空格，需要再给它一个东西，随便给它一个东西，那个东西可以去满足那个空格。然后程序读到了`1 2`。
- 放一个回车，如`"%d %d\n"`，是不是就读取回车了呢？结果是输入`1 2`，输入回车也没用，必须再随便给它一个什么东西，那个东西用来满足那个回车，然后才能继续下去，当然那个东西其实不会真的被读取到程序里面去
- 所以出现在`scanf`里面的东西都不是它要输出的，而是它要你输入的，如`"price%d %d"`，输入`1 2`，结果输出`0 0`，其实这时候`scanf`已经出错了，输入`price 1 2`才是输出`1 2`。你要给它一个`price`，不然就继续不下去，它就认为是错了的。你给它的不是`price`，随便给个什么东西，如`poowqe 1 2`，结果是没读到什么东西
- **出现在`scanf`的格式字符串里面的东西是它一定要你输入的东西，而不是它会给你看的东西。**要特别小心这件事件！

## 1.4 常量vs变量

> 不变的量是常量

### （1）常量

- `int change = 100 - price;`
- 固定不变的数，是常数。直接写在程序⾥，我们称作直接量（literal）。
- 更好的方式，是定义⼀个常量：
  - ` const int AMOUNT = 100;`

> C99写法

```c
#include <stdio.h>

int main()
{
  	const int AMOUNT = 100;
  	int price = 0;
  
  	printf("请输入金额（元）：");
  	scanf("%d", &price);
  
  	int change = AMOUNT - price;
  
  	printf("找您%d元。\n", change);
  
  	return 0;
}
```

使用常量来代替在程序当中的具体的数字有很多好处：

- 别人看100不知道是什么东西，如果看到AMOUNT，就会知道这表示的是金额，所以用这个有意义的名字可以让别人更容易理解你的这个数字是什么。我们把出现在程序里的这种莫名其妙的数字叫做magic number，像做魔术一样，不知道它到底是什么
- 把`const int AMOUNT = 100;`放在前面，如果将来要修改程序的时候，很容易找到AMOUNT

### （2）const

- `const`是⼀个修饰符，加在`int`的前面，用来给这个变量加上⼀个`const（不变的）`的属性。这个`const`的属性表示这个变量的值一旦初始化，就不能再修改了。
  - `int change = AMOUNT - price;`
- 如果你试图对常量做修改，把它放在赋值运算符的左边，就会被编译器发现，指出为⼀个错误。
- 一般对于`const`变量需要强调说，它是全大写的

> C99写法

### （3）try

- 让⽤户输入变量AMOUNT的值，而不是使⽤固定的初始值
-  这个变量在哪里定义合适呢？

```c
#include <stdio.h>

int main()
{
  	int amount = 100;
  	int price = 0;
  
  	printf("请输入金额（元）：");
  	scanf("%d", &price);
  
  	printf("请输入票面（元）：");
  	scanf("%d", &amount);
  
  	int change = amount - price;
  
  	printf("找您%d元。\n", change);
  
  	return 0;
}
```

### （4）tips

- 程序要求读入多个数字时，可以在一行输入，中间用空格分开，也可以在多行输⼊
-  在scanf的格式字符串中有⼏个%d，它就等待用户输⼊几个整数，当然，字符串后⾯也需要对应有那么多个整数

### （5）plus.c

```c
#include <stdio.h>

int main()
{
  	int a;
  	int b;
  
  	printf("请输入两个整数：");
  	scanf("%d %d", &a, &b);
  	printf("%d + %d = %d\n", a, b, a + b);
  
  	return 0;
}
```

终端编译plus.c

```shell
gcc plus.c

./a.out
```

有两种做法：

- 输入1，空格，输入2，回车，输出1 + 2 = 3
- 输入1，回车，输入2，回车，输出1 + 2 = 3。
  - 输入第一个回车，继续待在那里，因为它需要两个东西，你必须给它两个东西。
  - 假如开始按了很多回车也没事，只要你没有输入足够的两个东西它都会等你
  - 假如开始输入了字符串，如hello，这时scanf出错了，我们现在写的是简单程序，根本就没有去判断说scanf有没有出错，a和b没有得到值，但是程序还会继续往下走，printf还会执行拿两个很奇怪的a和b加起来输出了一个结果

### （6）其他

**小测验**

1、给定：`int a, b;`

以下哪些`scanf`的使用是正确的？A B C

```c
A scanf("%d", &a);

   scanf("%d", &b);

B scanf("%d %d", &a, &b);

C scanf("%d %d", &a, &b);

D scanf("%d %d", a, b);
```

2、以下哪些是有效的变量名？A D

```c
A main

B 4ever

C monkey-king

D ___int
```

3、给定：

`int a, b;`

`scanf("%d %d", &a, &b);`

则以下哪些输入方式是正确的？

```c
A 1 2
B 1,2
C 1(回车)2
D 1、2
```

4、给定以下代码段：

`int a, b = 0;`

则a的初始值是0：B

A &#10004;
B &#10008;

# 2. 数据类型

## 2.1 浮点数

> 整数运算的结果只有整数部分，不然就要用浮点数

### （1）⾝高5尺7⼨？

- 美国⼈固执地使⽤英制计量单位，他们习惯⽤用⼏尺⼏寸（英尺英寸）来报⾃己的身高。如果遇到一个美国人告诉你他是5英尺7，他的⾝高应该是一⽶几呢？
  - (5 + 7 ÷ 12 ) × 0.3048 = 1.7018米

### （2）计算⾝高的程序

```c
#include <stdio.h>

int main()
{
  	printf("请分别输入身高的英尺和英寸，如输入\"5 7\"表示5英尺7英寸：");
           
		int foot;
    int inch;
    
    scanf("%d %d", &foot, &inch);
           
    printf("身高是%f米。\n", ((foot + inch / 12) * 0.3048));
    
  	return 0;
}
```

### （3）运⾏一下

- 为什么总是1.524米？（输入5 7、5 9、5 0）

### （4）因为...

-  因为两个整数的运算的结果只能是整数
  - 10/3*3=>?
  - 10和10.0在C中是完全不同的数
  - 10.0是浮点数

### （5）浮点数

- 带⼩数点的数值。浮点这个词的本意就是指⼩数点是浮动的，是计算机内部表达⾮整数（包含分数和⽆理数）的⼀种⽅式。
- 另一种⽅式叫做定点数，不过在C语言中你不会遇到定点数。⼈们借用浮点数这个词来表达所有的带小数点的数。

### （6）改进

- `(foot + inch / 12) * 0.3048;`
- `(foot + inch / 12.0) * 0.3048;`
- 当浮点数和整数放到⼀起运算时，C会将整数转换成浮点数，然后进行浮点数的运算。

### （7）double

- inch是定义为int类型的变量，如果把int换成double，我们就把它改为double类型的浮点数变量了。
- double的意思是“双”，它本来是“双精度浮点数”的第⼀个单词，⼈们用来表示浮点数类型。除了double，还有float（意思就是浮点！）表⽰单精度浮点数。

### （8）另⼀个版本

```c
#include <stdio.h>

int main()
{
  	printf("请分别输入身高的英尺和英寸，哪输入\"5 7\"表示5英尺7英寸：");
  
  	double floot;
  	double inch;
  
  	scanf("%lf %lf", &foot, &inch);
  
  	printf("身高是%f米。\n", ((foot + inch / 12) * 0.3048));
  
  	return 0;
}
```

### （9）数据类型

- 整数
  - int
  - printf("%d",…)
  - scanf("%d",…)
- 带⼩数点的数
  -  double
  - printf("%f",…)
  - scanf("%lf",…)

### （10）整数

- 整数类型不能表达有小数部分的数，整数和整数的运算结果还是整数。
- 计算机里会有纯粹的整数这种奇怪的东西，是因为整数的运算比较快，⽽且占地⽅也小。其实人们日常⽣活中⼤量做的还是纯粹整数的计算，所以整数的用处还是很大的。

### （11）其他

**小测验**

1、写出正式的运算结果：`10/3.0*3`（如果认为结果是浮点数，请以小数点后一位小数来表示）：10.0

2、写出正式的运算结果：`10/3*3.0`（如果认为结果是浮点数，请以小数点后一位小数来表示）：9.0

# 3. 表达式计算

## 3.1 表达式

> 运算符和算子，取余运算，程序就是数据加计算

### （1）表达式

- ⼀个表达式是⼀系列运算符和算⼦的组合，用来计算一个值

  ```c
  amount = x * (1 + 0.033) * (1 + 0.033) * (1 + 0.033);
  total = 57;
  count = count + 1;
  value = (min / 2) * lastValue;
  ```

### （2）运算符

- 运算符（operator）是指进行运算的动作，⽐如加法运算符“+”，减法运算符“-”。

- 算子（operand）是指参与运算的值，这个值可能是常数，也可能是变量，还可能是⼀个⽅法的返回值

- 如下式：

  <img src="https://raw.githubusercontent.com/onetioner/img/main/PicGo2/202501121425934.png" alt="image-20250112142421954" style="zoom:25%;" />

- 再如：

- ```c
  int sides = 4;
  sides = 7;
  sides = sides + 5;
  ```

### （3）四则运算

| 四则运算 | C符号 | 意义 |
| :------: | :---: | :--: |
|    \+    |  \+   |  加  |
|    \-    |  \-   |  减  |
|    ×     |  \*   |  乘  |
|    ÷     |   /   |  除  |
|          |   %   | 取余 |
|    ()    |  ()   | 括号 |

- `%`表⽰取两个数相除以后的余数

### （4）计算时间差

- 输⼊两个时间，每个时间分别输⼊小时和分钟的值，然后输出两个时间之间的差，也以几⼩时⼏分表⽰

- 如果直接分别减，会出现分钟借位的情况：1点40分和2点10分的差？

-  `hour1 * 60 + minute1`—>转换为分钟为单位

- ` t / 60`—>小时部分；`t % 60`—>分钟

- ```c
  #include <stdio.h>
  
  int main()
  {
    	int hour1, minute1;
    	int hour2, minute2;
    
    	scanf("%d %d", &hour1, &minute1);
    	scanf("%d %d", &hour2, &minute2);
    
    	int t1 = hour1 * 60 + minute1;
    	int t2 = hour2 * 60 + minute2;
    
    	int t = t2 - t1;
    
    	printf("时间差是%d小时%分。", t/60, t%60);
    
    	return 0;
  }
  ```

## 3.2 运算符优先级

> 优先级、结合关系、赋值运算符

### （1）求平均值

-  写一个程序，输⼊两个整数，输出它们的平均值

- ```c
  #include <stdio.h>
  
  int main()
  {
    	int a, b;
    
    	scanf("%d %d", &a, &b);
    	
    	double c = (a + b) / 2.0;  // 括号
    
    	printf("%d和%d的平均值=%f\n", a, b, c);
    
    	return 0;
  }
  ```

### （2）运算符优先级

| 优先级 | 运算符 |   运算   |   结合关系   | 举例 |
| :----: | :----: | :------: | :----------: | :--: |
|   1    |   +    | 单目不变 | **自右向左** | a*+b |
|   1    |   -    | 单目取负 | **自右向左** | a*-b |
|   2    |   *    |    乘    |   自左向右   | a*b  |
|   2    |   /    |    除    |   自左向右   | a/b  |
|   2    |   %    |   取余   |   自左向右   | a%b  |
|   3    |   +    |    加    |   自左向右   | a+b  |
|   3    |   -    |    减    |   自左向右   | a-b  |
|   4    |   =    |   赋值   | **自右向左** | a=b  |

> 单目运算符，只有一个算子，例如-a
>
> 双目运算符，两个算子，例如a+b

### （3）单目运算符

- 只有⼀个算子的运算符：+、-

- ```c
  int a = 10;
  int b = -20;
  printf("%d", a * - b);
  ```

### （4）赋值运算符

- 赋值也是运算，也有结果
- `a=6`的结果是`a`被赋予的值，也就是`6`
- `a = b = 6 —> a = (b = 6)`

### （5）“嵌⼊式赋值”

```c
int a = 6;
int b;
int c = 1 + (b=a);
```

- 不利于阅读
- 容易产生错误

### （6）结合关系

- 一般自左向右

- 单目+-和赋值=自右向左

- ```c
  result = a = b = 3 + c;
  result = 2;
  result = (result = result * 2) * 6 * (result = 3 + result);
  ```

- 这样的表达式太复杂，不容易阅读和理解，容易造成读程序时的误解。

- 所以，要避免写出这样的复杂表达式来的。这个表达式应该被拆成若干个表达式，然后以明显的顺序来进行计算。

### （7）其他

**讨论**

- 不好的表达式

  - ```c
    a = 5;
    c = (b = a + 2) - (a = 2);
    
    c = 5
    ```

## 3.3 交换变量

> 如何交换两个变量的值，顺便看下Dev的调试功能

### （1）交换两个变量

- 如果已经有：

  `int a = 6;`

  `int b = 5;`

- 如何交换a、b两个变量的值？

### （2）程序是按步执行的

- 程序表达的是顺序执行的动作，而不是关系
- `a = b;`
- `b = a;`

- 是依次执行的，结果使得a和b都得到b原来的值

### （3）交换

- `int t = a;`

- `a = b;`

- `b = t;`

- ```c
  #include <stdio.h>
  
  int main()
  {
    	int a = 5;
    	int b = 6;
    	int t;
    
    	t = a;
    	a = b;
    	b = t;
    
    	printf("a=%d, b=%d\n", a, b);
    
    	return 0;
  }
  ```

- 使用调试的方式看程序的运行，需要打断点

## 3.4 复合赋值和递增递减

> 这是两类有历史也有争议的运算符

### （1）复合赋值

- 5个算术运算符，`+ - * / %`，可以和赋值运算符“`=`”结合起来，形成复合赋值运算符：“`+=`”、“`-=`”、“`*=`”、“`/=`”和“`%=`”
  - `total += 5;`
  - `total = total + 5;`
- 注意两个运算符中间不要有空格
- `total += (sum+100)/2;`
  - `total = total + (sum+100)/2;`
- ` total * = sum+12;`
  - ` total = total * (sum+12);`
- ` total /= 12+6;`
  - `total = total / (12+6);`

### （2）递增递减运算符

- “`++`”和“`--`”是两个很特殊的运算符，它们是单目运算符，这个算子还必须是变量。
- 这两个运算符分别叫做递增和递减运算符，他们的作用就是给这个变量`+1`或者`-1`。
  - ` count++;`
  - `count += 1;`
  - ` count = count + 1;`

### （3）前缀后缀

- `++`和`--`可以放在变量的前面，叫做前缀形式，也可以放在变量的后面，叫做后缀形式。
- `a++`的值是a加1以前的值，而`++a`的值是加了1以后的值，⽆论哪个，a⾃己的值都加了1了。\

```c
#include <stdio.h>

int main()
{
  	int a;
  	a = 10;
  
  	printf("a++=%d\n", a++);  // 10，表达式的值是count原来的值
  	printf("a=%d\n", a);  // 11
  	
  	printf("++a=%d\n", ++a);  // 12，表达式的值是count+2以后的值
  	printf("a=%d\n", a);  // 12
  
  	return 0;
}
```

| 表达式  | 运算       | 表达式的值      |
| ------- | ---------- | --------------- |
| count++ | 给count加1 | count原来的值   |
| ++count | 给count加1 | count+1以后的值 |
| count-- | 给count减1 | count原来的值   |
| --count | 给count减1 | count-1以后的值 |

### （4）++--

- 这两个运算符有其历史来源
- 可以单独使用，但是不要组合进表达式
  -  `++i++ -->?`
  - ` i++++ —>?`

- `a = b+=c++-d+--e/-f`

### （5）其他

**讨论**

- `a = b+=c++-d+--e/-f`



**小测验**

1、写出以下代码执行后，t1和t2的值，以空格隔开：

```c
int a = 14;
int t1 = a++;
int t2 = ++a;
```

结果是：14 16

2、写出以下表达式的结果，结果之间间隔一个空格：

```c
6 + 5 / 4 -2
2 + 2 * (2 * 2 - 2) % 2 / 3
10 + 9 * ((8 + 7) % 6) + 5 * 4 % 3 * 2 + 3
1 + 2 + (3 + 4) * ((5 * 6 % 7 / 8) - 9) * 10

结果是：5 2 44 -627
```



# 4. 在线评判系统

## 4.1 如何在中国大学MOOC做题

略

## 4.2 如何在pintia做题

https://pintia.cn/home

和中国大学MOOC账号绑定

邀请码能在课程里能找到

## 4.3 编程题解析

略